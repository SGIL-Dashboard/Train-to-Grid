{% extends 'basic.html' %}

{% block title %}
7-Line
{% endblock %}

{% load static %}

{% block css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/select2.min.css' %}" />
<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}" />
<link rel="stylesheet" href="{% static 'css/style.css' %}" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<style>
  .seven h2 {
    text-align: center;
    font-size: 30px;
    font-weight: 300;
    color: #222;
    letter-spacing: 1px;
    text-transform: uppercase;

    display: grid;
    grid-template-columns: 1fr max-content 1fr;
    grid-template-rows: 27px 0;
    grid-gap: 20px;
    align-items: center;
  }

  .pointer {
    position: absolute;
    width: 1.3%;
    height: 3%;
  }

  .logoImage {
    width: 100%;
    height: 100% !important;
  }

  .hiddenText {
    opacity: 0;
    font-size: 5px;
  }

  .stationInfo {
    position: absolute;
    bottom: 100%;
    left: -60%;
    z-index: 90;
    display: none;
    flex-direction: column;
    align-items: center;
    width: 1300%;
    flex-shrink: 0;
    height: fit-content;
    border: 0;

  }

  .stationInfoRev {
    position: absolute;
    bottom: 100%;
    right: -60%;
    z-index: 90;
    display: none;
    flex-direction: column;
    align-items: center;
    width: 1300%;
    flex-shrink: 0;
    height: fit-content;
    border: 0;

  }

  .stationInfoRev .powerDownArrow {
    left: auto;
    right: 5%;
  }

  .hidden {
    display: none;
  }

  .lastStation {
    left: auto;
    right: -60%;
  }

  .powerPointer {
    position: absolute;
    width: 1.3%;
    height: 3%;
    flex-shrink: 0;
    background-color: black;
    display: flex;
    align-items: center;
    z-index: 0;
    justify-content: center;
    border: 1px solid black;
    border-radius: 2px;
    transition: all 0.1s ease-in-out;
    /* padding: 10px; */
  }

  .powerPointer:hover {
    scale: 1.2;
  }
  .powerPointer:hover .stationInfoRev .stationInfo {
    display: flex;
  }

  .hiddenSpaceManager {
    width: 100%;
    min-height: 5%;
    flex-shrink: 0;
    display: flex;
  }

  .downArrow {
    height: 10%;
    width: 10%;
    background-color: #3949AB;
    position: absolute;
    bottom: -10%;
    left: 5%;
    clip-path: polygon(100% 0, 1% 0, 50% 100%);
  }

  .powerDownArrow {
    height: 10%;
    width: 10%;
    background-color: black;
    position: absolute;
    bottom: -10%;
    left: 5%;
    clip-path: polygon(100% 0, 1% 0, 50% 100%);
  }

  .stationName {
    font-size: 12px;
    color: white;
  }

  .hoverMe:hover .stationInfo {
    display: flex;
  }

  .hoverMe:focus-within .stationInfo {
    display: flex;
  }

  .hoverMe {
    width: 100%;
    height: 100%;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .parentStationDetails {
    width: 100%;
    border: 3px solid #3949AB;
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
  }

  .parentPowerStationDetails {
    width: 100%;
    border: 3px solid black;
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
  }

  .headingParent {
    width: 100%;
    height: 15%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #3949AB;
  }

  .headingPowerParent {
    width: 100%;
    height: 15%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: black;
  }

  .lastArrow {
    left: auto;
    right: 5%
  }

  .graphContainerParent {
    width: 100vw;
    height: 100vh;
    position: fixed;
    top: 0;
    left: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 150;
    flex-shrink: 0;
    background-color: rgba(0, 0, 0, .5);
  }

  .graphInnerContainer {
    width: 100%;
    height: 80%;
    display: flex;
    align-items: center;
    justify-content: flex-start;

    overflow-x: hidden;
  }

  .seven h2:after,
  .seven h2:before {
    content: " ";
    display: block;
    border-bottom: 1px solid #c50000;
    border-top: 1px solid #c50000;
    height: 5px;
    background-color: #f8f8f8;
  }


  #new-content {
    position: relative;
    width: 100%;
  }

  #new-content img {
    width: 100%;
    height: auto;
  }

  /* #new-content {
  transform:
    perspective(750px)
    translate3d(0px, 0px, -250px)
    rotateX(27deg)
    scale(0.9, 0.9);
  border-radius: 20px;
  border: 5px solid #e6e6e6;
  box-shadow: 0 30px 40px -20px rgba(0, 0, 0, 0.2);
  transition: 0.4s ease-in-out transform;

  &:hover {
    transform: translate3d(0px, 0px, -250px);
  }
} */
  /* Absolute Center Spinner */
  .loading {
    position: fixed;
    z-index: 999;
    height: 2em;
    width: 2em;
    overflow: show;
    margin: auto;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
  }

  .overflowenDiv {
    width: fit-content;
    flex-shrink: 0;
    height: 100%;
    overflow: hidden;
    display: flex;
    align-items: center;
    transition: all 0.3s ease-in-out;
  }

  .graphContainer {
    width: 30vw;
    flex-shrink: 0;
    height: 70%;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease-in-out;

  }
  .graphContainerForLive {
    width: 30vw;
    flex-shrink: 0;
    height: 50%;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease-in-out;

  }

  .graphContainerSelected {
    width: 40vw;
    flex-shrink: 0;
    height: 100%;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease-in-out;
  }
  .graphContainerSelectedForLive {
    width: 40vw;
    flex-shrink: 0;
    height: 70%;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease-in-out;
  }

  .graphContainerSelected .subParentGraphContainer .changeSelctionsButtons {
    display: none;
  }
  .graphContainerSelectedForLive .subParentGraphContainer .changeSelctionsButtons {
    display: none;
  }

  .subParentGraphContainer {
    width: 100%;
    border-radius: 30px;
    flex-shrink: 0;
    height: 100%;
    background-color: white;
    position: relative;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  .graphContainer .subParentGraphContainer .changeSelctionsButtons {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    background-color: rgba(0, 0, 0, .5) !important;
    height: 100% !important;
    display: flex !important;
    border: 0;
    outline: none;
    flex-shrink: 0 !important;
    border-radius: 30px !important;
    z-index: 10 !important;

  }
  .graphContainerForLive .subParentGraphContainer .changeSelctionsButtons {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    background-color: rgba(0, 0, 0, .5) !important;
    height: 100% !important;
    display: flex !important;
    border: 0;
    outline: none;
    flex-shrink: 0 !important;
    border-radius: 30px !important;
    z-index: 10 !important;

  }

  .graphHeading {
    font-size: 1.2rem;
    color: black;
    text-align: center;
    padding-top: 1rem;
    padding-bottom: 1.5rem;
  }

  .toggleDiv {
    width: 20rem;
    display: flex;
    align-items: center;
    border: 2px solid white;
    border-radius: 8px;
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    bottom: 10px;
    z-index: 10;
  }

  .toggleButton {
    flex: 1 !important;
    padding-top: 5px;
    padding-bottom: 5px;
    background-color: transparent !important;
    color: white;
    border: 0;
  }

  .toggleButton:focus {
    outline: none;

  }

  .selectedButton {
    background-color: white !important;
    color: black;

  }

  .toggleButton:last-child {
    border-left: 2px solid white !important;
  }

  .status {}

  .graphImage {
    object-fit: contain;
    width: calc(100% - 6rem);
    height: 60% !important;
  }
  .graphImageForLive {
    object-fit: contain;
    width: calc(100% - 6rem);
    height: 100% !important;
  }

  /* Transparent Overlay */
  .loading:before {
    content: '';
    display: block;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(rgba(20, 20, 20, .8), rgba(0, 0, 0, .8));

    background: -webkit-radial-gradient(rgba(20, 20, 20, .8), rgba(0, 0, 0, .8));
  }

  /* :not(:required) hides these rules from IE9 and below */
  .loading:not(:required) {
    /* hide "loading..." text */
    font: 0/0 a;
    color: transparent;
    text-shadow: none;
    background-color: transparent;
    border: 0;
  }

  .crossButton {
    position: fixed;
    top: 0px;
    right: 8px;
    color: white;
    font-size: 40px;
    z-index: 10;
    background-color: transparent;
    outline: none;
    border: 0;
  }

  .loading:not(:required):after {
    content: '';
    display: block;
    font-size: 10px;
    width: 1em;
    height: 1em;
    margin-top: -0.5em;
    -webkit-animation: spinner 150ms infinite linear;
    -moz-animation: spinner 150ms infinite linear;
    -ms-animation: spinner 150ms infinite linear;
    -o-animation: spinner 150ms infinite linear;
    animation: spinner 150ms infinite linear;
    border-radius: 0.5em;
    -webkit-box-shadow: rgba(255, 255, 255, 0.75) 1.5em 0 0 0, rgba(255, 255, 255, 0.75) 1.1em 1.1em 0 0, rgba(255, 255, 255, 0.75) 0 1.5em 0 0, rgba(255, 255, 255, 0.75) -1.1em 1.1em 0 0, rgba(255, 255, 255, 0.75) -1.5em 0 0 0, rgba(255, 255, 255, 0.75) -1.1em -1.1em 0 0, rgba(255, 255, 255, 0.75) 0 -1.5em 0 0, rgba(255, 255, 255, 0.75) 1.1em -1.1em 0 0;
    box-shadow: rgba(255, 255, 255, 0.75) 1.5em 0 0 0, rgba(255, 255, 255, 0.75) 1.1em 1.1em 0 0, rgba(255, 255, 255, 0.75) 0 1.5em 0 0, rgba(255, 255, 255, 0.75) -1.1em 1.1em 0 0, rgba(255, 255, 255, 0.75) -1.5em 0 0 0, rgba(255, 255, 255, 0.75) -1.1em -1.1em 0 0, rgba(255, 255, 255, 0.75) 0 -1.5em 0 0, rgba(255, 255, 255, 0.75) 1.1em -1.1em 0 0;
  }

  /* Animation */

  @-webkit-keyframes spinner {
    0% {
      -webkit-transform: rotate(0deg);
      -moz-transform: rotate(0deg);
      -ms-transform: rotate(0deg);
      -o-transform: rotate(0deg);
      transform: rotate(0deg);
    }

    100% {
      -webkit-transform: rotate(360deg);
      -moz-transform: rotate(360deg);
      -ms-transform: rotate(360deg);
      -o-transform: rotate(360deg);
      transform: rotate(360deg);
    }
  }

  @-moz-keyframes spinner {
    0% {
      -webkit-transform: rotate(0deg);
      -moz-transform: rotate(0deg);
      -ms-transform: rotate(0deg);
      -o-transform: rotate(0deg);
      transform: rotate(0deg);
    }

    100% {
      -webkit-transform: rotate(360deg);
      -moz-transform: rotate(360deg);
      -ms-transform: rotate(360deg);
      -o-transform: rotate(360deg);
      transform: rotate(360deg);
    }
  }

  @-o-keyframes spinner {
    0% {
      -webkit-transform: rotate(0deg);
      -moz-transform: rotate(0deg);
      -ms-transform: rotate(0deg);
      -o-transform: rotate(0deg);
      transform: rotate(0deg);
    }

    100% {
      -webkit-transform: rotate(360deg);
      -moz-transform: rotate(360deg);
      -ms-transform: rotate(360deg);
      -o-transform: rotate(360deg);
      transform: rotate(360deg);
    }
  }

  @keyframes spinner {
    0% {
      -webkit-transform: rotate(0deg);
      -moz-transform: rotate(0deg);
      -ms-transform: rotate(0deg);
      -o-transform: rotate(0deg);
      transform: rotate(0deg);
    }

    100% {
      -webkit-transform: rotate(360deg);
      -moz-transform: rotate(360deg);
      -ms-transform: rotate(360deg);
      -o-transform: rotate(360deg);
      transform: rotate(360deg);
    }
  }
</style>
{% endblock %}

{% block body %}
<!-- about section -->

<body>
  <div class="loading" style="display: none;">Loading</div>
  <section style="" class="service_section layout_padding">
    <div class="container" style="min-width: 100%;">
      <div>
        <div id="mta_7_line_details" delete-src="{% static 'images/bin.png' %}"
          edit-src="{% static 'images/edit.png' %}">
          <div>
          </div>
          <div class="modal" id="mta_7_line_modal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header text-center">
                  <h4 id="modal-title" class="modal-title w-100 font-weight-bold">Select Station</h4>
                  <button type="button" class="mta_close close" data-dismiss="modal" aria-label="Close"><span
                      aria-hidden="true">×</span></button>
                </div>
                <div class="modal-body mx-3">
                  <form id="mta_7_line_details_form">
                    <div>
                      <div class="form-group">
                        <input type="radio" name="main-option" id="power_station_option" value="power" checked>
                        <label class="modal-labels" for="power_station_option">Power Station</label>
                        <input type="radio" name="main-option" id="passenger_station_option" value="passenger">
                        <label class="modal-labels" for="passenger_station_option">Passenger Station</label>
                      </div>
                      <div class="form-group power_station_option">
                        <select aria-describedby="Select power station" placeholder="Select power station"
                          class="form-control" id="mta_power_stations" name="power_stations">
                          <option name="">Select Power Station</option>
                          <option name="Hudson34">34 St-Hudson Yards Substation</option>
                          <option name="Ave10">10th Ave Substation</option>
                          <option name="Ave7">7 Ave-43 St Substation</option>
                          <option name="Park">Park Ave-41 St Substation</option>
                          <option name="Tudor">Tudor Substation</option>
                          <option name="Ave50">50 Ave-11 St Substation</option>
                          <option name="Jackson">Jackson Ave-West St Substation</option>
                          <option name="QueensBlvd">Queens Blvd-39 Place Substation</option>
                          <option name="St58">58 St Substation</option>
                          <option name="St78">Roosevelt-78 St Substation</option>
                          <option name="Spruce">Corona Yard Substation</option>
                          <option name="Corona">Lawrence Substation</option>
                          <option name="Lawrence">Roosevelt-Spruce St Substation</option>
                        </select>
                      </div>
                      <div class="form-group passenger_station_option d-none">
                        <select aria-describedby="Select passenger station" placeholder="Select passenger station"
                          class="form-control" id="mta_passenger_stations" name="passenger_stations">
                          <option name="">Select Passenger Station</option>
                          <option name="HudsonYards">HudsonYards</option>
                          <option name="TimesSquare">TimesSquare</option>
                          <option name="Ave5">Ave5</option>
                          <option name="GrandCentral">GrandCentral</option>
                          <option name="Vernon">Vernon</option>
                          <option name="HuntersPoint">HuntersPoint</option>
                          <option name="CourtSquare">CourtSquare</option>
                          <option name="QueensboroPlaza">QueensboroPlaza</option>
                          <option name="St33">St33</option>
                          <option name="St40">St40</option>
                          <option name="St46">St46</option>
                          <option name="St52">St52</option>
                          <option name="St61">St61</option>
                          <option name="St69">St69</option>
                          <option name="St74">St74</option>
                          <option name="St82">St82</option>
                          <option name="St90">St90</option>
                          <option name="JunctionBlvd">JunctionBlvd</option>
                          <option name="St103">St103</option>
                          <option name="St111">St111</option>
                          <option name="WilletsPoint">WilletsPoint</option>
                          <option name="MainSt">MainSt</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <!-- <input class="mta-facility-option" type="checkbox" id="mta_default" name="default" value="default" />
                        <label class="modal-labels" for="mta_default">Default</label> -->
                        <input class="mta-facility-option" type="checkbox" id="mta_electric_vehicle"
                          name="electric_vehicle" value="electric_vehicle" />
                        <label class="modal-labels" for="mta_electric_vehicle">Electric Vehicle</label>
                        <input class="mta-facility-option" type="checkbox" id="mta_energy_storage" name="energy_storage"
                          value="energy_storage" />
                        <label class="modal-labels" for="mta_energy_storage">Energy Storage</label>
                        <input class="mta-facility-option solar-check-box d-none" type="checkbox" id="mta_solar"
                          name="solar" value="solar" />
                        <label class="modal-labels solar-check-box d-none" for="mta_solar">Solar</label>
                      </div>
                      <div class="md-form form-group energy_storage_expand" style="display: none;">
                        <input class="facility-option" type="checkbox" id="mta_battery" name="battery"
                          value="battery" />
                        <label class="modal-labels" for="mta_battery">Battery</label>
                        <input class="facility-option" type="checkbox" id="mta_fly_wheel" name="fly_wheel"
                          value="fly_wheel" />
                        <label class="modal-labels" for="mta_fly_wheel">Flywheel</label>
                        <input class="facility-option" type="checkbox" id="mta_supercapacitor" name="supercapacitor"
                          value="supercapacitor" />
                        <label class="modal-labels" for="mta_supercapacitor">Supercapacitor</label>
                      </div>
                      <div class="form-group mta-size-parameter row">
                        <div class="electric_vehicle_expand mb-2 col-md-6" style="display: none;">
                          <label for="ev_size" class="mta-ev-size-expand">EV Size (MW):</label>
                          <input label="EV Size" class="mta-ev-size-expand" type="number" id="ev_size" min="0" max="1"
                            step="0.1" name="ev_size" value="ev_size" />
                        </div>
                        <div class="solar_expand col-md-6" style="display: none;">
                          <label for="solar_size" class="mta-solar-size-expand">Solar Size (kW):</label>
                          <input label="Solar Size" class="mta-solar-size-expand" type="number" id="solar_size" min="0"
                            max="200" name="solar_size" value="solar_size" />
                        </div>
                        <div class="mta-energy_storage-parameter row">
                          <div class="ml-lg-3 mr-3 battery_expand" style="display: none;">
                            <label for="battery_size" class="modal-labels">Battery Size (MW):</label>
                            <input label="Battery Size" class="facility-option" min="0" max="3" type="number"
                              id="battery_size" step="0.1" name="battery_size" value="battery_size" />
                          </div>
                          <div class="ml-3 mr-3 fly_wheel_expand" style="display: none;">
                            <label for="fly_size" class="modal-labels">Flywheel Size (MW):</label>
                            <input label="Fly Size" class="facility-option" min="0" max="2" type="number" id="fly_size"
                              step="0.1" name="fly_size" value="fly_size" />
                          </div>
                          <div class="ml-3 mr-3 supercapacitor_expand" style="display: none;">
                            <label for="supercapacitor_size" class="modal-labels">Supercapacitor Size (MW):</label>
                            <input label="Supercapacitor Size" class="facility-option" min="0" max="1" type="number"
                              id="supercapacitor_size" step="0.1" name="supercapacitor_size"
                              value="supercapacitor_size" />
                          </div>
                        </div>
                      </div>
                    </div>
                    <a class="btn btn-primary" name="mta_form_submit"><span>submit</span></a>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <div class="modal" id="transient_modal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header text-center">
                  <h4 id="modal-title" class="modal-title w-100 font-weight-bold">Select Stations and Train Type</h4>
                  <button type="button" class="mta_close close" data-dismiss="modal" aria-label="Close"><span
                      aria-hidden="true">×</span></button>
                </div>
                <div class="modal-body mx-3">
                  <form id="transient_details_form">
                    <table class="table table-borderless">
                      <tr>
                        <td><label for="transient_train_type">Train Type</label></td>
                        <td><select aria-describedby="Select Train Type" placeholder="Select Train Type"
                            class="form-control" id="transient_train_type" name="train_type">
                            <option name="" value="">Select Train Type</option>
                            <option name="local">Local</option>
                            <option name="express">Express</option>
                          </select></td>
                      </tr>
                      <tr>
                        <td>
                          <label for="transient_origin_station" class="org_station">Origin station</label>
                        </td>
                        <td>
                          <select aria-describedby="Select Origin station" placeholder="Select Origin station"
                            class="org_station form-control" id="transient_origin_station" name="origin_station">
                            <option name="" value="">Select Origin Station</option>
                            <option name="HudsonYards" value="HudsonYards">34 St-Hudson Yards</option>
                            <option name="TimesSquare" value="TimesSquare">Times Square-42 St</option>
                            <option name="Ave5" value="Ave5">5 Ave</option>
                            <option name="GrandCentral" value="GrandCentral">Grand Central-42 St</option>
                            <option name="Vernon" value="Vernon">Vernon Blvd-Jackson Av</option>
                            <option name="HuntersPoint" value="HuntersPoint">Hunters Point Av</option>
                            <option name="CourtSquare" value="CourtSquare">Court Square</option>
                            <option name="QueensboroPlaza" value="QueensboroPlaza">Queensboro Plaza</option>
                            <option name="St33" value="St33">33 St-Rawson St</option>
                            <option name="St40" value="St40">40 St-Lowery St</option>
                            <option name="St46" value="St46">46 St-Bliss St</option>
                            <option name="St52" value="St52">52 St</option>
                            <option name="St61" value="St61">61 St-Woodside</option>
                            <option name="St69" value="St69">69 St</option>
                            <option name="St74" value="St74">74 St-Broadway</option>
                            <option name="St82" value="St82">82 St-Jackson Hts</option>
                            <option name="St90" value="St90">90 St-Elmhurst Av</option>
                            <option name="JunctionBlvd" value="JunctionBlvd">Junction Blvd</option>
                            <option name="St103" value="St103">103 St-Corona Plaza</option>
                            <option name="St111" value="St111">111 St</option>
                            <option name="WilletsPoint" value="WilletsPoint">Mets-Willets Pt</option>
                            <option name="MainSt" value="MainSt">Flushing-Main St</option>
                          </select>
                        </td>
                      </tr>
                      <tr>
                        <td><label for="transient_destination_station" class="dest_station">Destination station</label>
                        </td>
                        <td><select aria-describedby="Select Destination station"
                            placeholder="Select Destination station" class="dest_station form-control"
                            id="transient_destination_station" name="destination_station">
                            <option name="" value="">Select Destination Station</option>
                            <option name="HudsonYards" value="HudsonYards">34 St-Hudson Yards</option>
                            <option name="TimesSquare" value="TimesSquare">Times Square-42 St</option>
                            <option name="Ave5" value="Ave5">5 Ave</option>
                            <option name="GrandCentral" value="GrandCentral">Grand Central-42 St</option>
                            <option name="Vernon" value="Vernon">Vernon Blvd-Jackson Av</option>
                            <option name="HuntersPoint" value="HuntersPoint">Hunters Point Av</option>
                            <option name="CourtSquare" value="CourtSquare">Court Square</option>
                            <option name="QueensboroPlaza" value="QueensboroPlaza">Queensboro Plaza</option>
                            <option name="St33" value="St33">33 St-Rawson St</option>
                            <option name="St40" value="St40">40 St-Lowery St</option>
                            <option name="St46" value="St46">46 St-Bliss St</option>
                            <option name="St52" value="St52">52 St</option>
                            <option name="St61" value="St61">61 St-Woodside</option>
                            <option name="St69" value="St69">69 St</option>
                            <option name="St74" value="St74">74 St-Broadway</option>
                            <option name="St82" value="St82">82 St-Jackson Hts</option>
                            <option name="St90" value="St90">90 St-Elmhurst Av</option>
                            <option name="JunctionBlvd" value="JunctionBlvd">Junction Blvd</option>
                            <option name="St103" value="St103">103 St-Corona Plaza</option>
                            <option name="St111" value="St111">111 St</option>
                            <option name="WilletsPoint" value="WilletsPoint">Mets-Willets Pt</option>
                            <option name="MainSt" value="MainSt">Flushing-Main St</option>
                          </select></td>
                      </tr>
                    </table>
                    <a class="btn btn-primary" name="transient_form_submit"><span>submit</span></a>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="" style="display: flex; flex-direction: column; align-items: center;">
          <div class="div"
            style="width: 100%; font-size: 20px; display: flex; align-items: center; justify-content: space-evenly;">
            <div class="div"
              style="width: fit-content; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px;">
              <div class="pointer" style="position: static; width: 40px; height: 40px;">
                <img src="{% static 'images/trainLogo.png' %}" class="logoImage" alt="" style="width: 100%;" />
              </div>
              <span style="color: rgb(149, 149, 149);">Passenger Station</span>
            </div>
            <span style="display: flex;flex-direction: column;align-items: center; ">
              <h2 style="font-size: 29px; font-weight: 600; color: #3949AB;">MTA 7-Line</h2>
              <h2 style="font-size: 18px; color: rgb(149, 149, 149);">Map View</h2>
            </span>
            <div class="div"
              style="width: fit-content; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px;">
              <div class="pointer"
                style="position: static; width: 40px; height: 40px; overflow: hidden; background-color: black; border-radius: 5px;">
                <img src="{% static 'images/electricityLogo2.png' %}" class="logoImage" alt="" />
              </div>
              <span style="color: rgb(149, 149, 149);">Power Station</span>
            </div>
          </div>
          <!-- <img src="{% static 'images/plug.png' %}" alt="" /> -->
        </div>
      </div>
      <br>
      <!-- <iframe src="https://www.google.com/maps/d/u/2/embed?mid=1j_wHYjnVX6n7nXNyzFLZuYs6VFm3YpFA&ehbc=2E312F" width="100%" height="500" frameborder="0"></iframe> -->
      <div id="new-content" style="position: relative;">
        <img src="{% static 'images/Map.png' %}" usemap="#image-map" />
        <div class="div" style=" position: absolute; z-index: 0; bottom: 10px; left: 50%; transform: translateX(-50%);">
          <button class="graph-button d-none" style="border-radius: 10px; background-color: #124CAA;"
            id="transient-train-graph">Live Train Graphs</button>
        </div>
      </div>
      <!-- HTML !-->
      <br>
      <br>
      <div class="mt-4">
      </div>
      <h4 style="color: #124caa;" class="">Modify Station</h4>

      <div id="station-content">
        <table id="station-table" style="margin-bottom: 0;" class="table table-striped ">
          <thead>
            <tr style="background-color: transparent; color: #266ee2;">
              <th style="font-weight: 300; border-bottom: 2px solid hsl(217, 84%, 59%);" scope="col">Station</th>
              <!-- <th scope="col">Default</th> -->
              <th style="font-weight: 300; border-bottom: 2px solid #4183ee;" scope="col">EV Size (MW)</th>
              <th style="font-weight: 300; border-bottom: 2px solid #4183ee;" scope="col">Solar Size (kW)</th>
              <th style="font-weight: 300; border-bottom: 2px solid #4183ee;" scope="col">Battery Size (MW)</th>
              <th style="font-weight: 300; border-bottom: 2px solid #4183ee;" scope="col">Flywheel Size (MW)</th>
              <th style="font-weight: 300; border-bottom: 2px solid #4183ee;" scope="col">Supercapacitor Size (MW)</th>
              <th style="font-weight: 300; border-bottom: 2px solid #4183ee;" scope="col"></th>
              <th style="font-weight: 300; border-bottom: 2px solid #4183ee;" scope="col"></th>
            </tr>
          </thead>
          <tbody>
            <tr id="no-data-row">

            </tr>
          </tbody>
        </table>
        <div class=""
          style="display: flex; background-color: #F9F9F9; align-items: center; justify-content: center; padding-top: .75rem; padding-bottom: .75rem;">
          <button class="station-button beforeButton"
            style="background-color: #124CAA; color: white; border-radius:25px; font-size: 17px; padding-left: 20px; padding-right: 20px;"
            id="add-line">Add</button>
        </div>
        <h4 style="color: #124caa; margin-top: 3rem;">Simulate Live Train</h4>

        <table id="transient-table" class="table table-striped">
          <thead>
            <tr style="background-color: transparent; color: #266ee2; border-bottom: 2px solid #14B8A6;">
              <th style="font-weight: 300; border-bottom: 2px solid #4183ee;" scope="col">Origin Station</th>
              <th style="font-weight: 300; border-bottom: 2px solid #4183ee;" scope="col">Destination Station</th>
              <th style="font-weight: 300; border-bottom: 2px solid #4183ee;" scope="col">Train Type</th>
              <th style="font-weight: 300;border-bottom: 2px solid #4183ee;" scope="col"></th>
              <th style="font-weight: 300;border-bottom: 2px solid #4183ee;" scope="col"></th>
            </tr>
          </thead>
          <tbody>
            <tr id="transient-no-data-row">
              <td colspan="5" style="background-color: rgb(249, 249, 249);">
                <!-- <h2 style="font-size: 20px;" class="no-data-text">Not Added Yet ,  ?</h2> -->
                <button class="station-button" id="add-transient-line"
                  style="background-color: #124CAA; color: white; border-radius:25px; font-size: 17px; padding-left: 20px; padding-right: 20px;">Add</button>
                <!-- <button class="station-button" id="add-transient-line">Add</button> -->
              </td>
            </tr>
          </tbody>
        </table>
        <div class="mb-3">
          <div class="div" style="width: 100%; display: flex; align-items: center; justify-content: start;">
            <!-- <button class="station-button" id="add-transient-line" style="background-color: rgb(241, 238, 238); color: black; border-radius: 8px;">Add new Train Path</button> -->
          </div>
        </div>
        <button class="calculate-button" id="calculate-record"
          style="border-radius: 10px; background-color: transparent; color: #124CAA; border-color: #124CAA; box-shadow: none; font-weight: 100; margin-top: 32px;">Calculate</button>
      </div>

      <div class="modal" id="myModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header text-center">
              <h4 id="modal-graph-title" class="modal-title w-100 font-weight-bold"></h4>
              <button type="button" id="close-graph-modal" class="close" data-dismiss="modal" aria-label="Close"><span
                  aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body mx-3" id="map-graphs">
              <!-- <img name="stedy" class="modal-content" id="stedy_img"/>
              <img name="transient" style="display:none;" class="modal-content" id="transient_img"/>
              <div class="graph-type-options">
                <input type="radio" name="graph_type" id="stedy" value="stedy" checked>
                <label class="modal-labels" for="stedy">24 Hr</label>
                <input type="radio" name="graph_type" id="transient" value="transient">
                <label class="modal-labels" for="transient">Live</label>
              </div>
              <div id="caption"></div> -->
              <div id="caption" class="d-none"></div>
              <a class="prev" onclick="plusGSlides(-1)">❮</a>
              <a class="next" onclick="plusGSlides(1)">❯</a>
              <!-- <div class="graph-type-options" style="text-align:center">
                <span class="dot" onclick="currentGSlide(1)"></span>
                <span class="dot" onclick="currentGSlide(2)"></span>
                <span class="dot" onclick="currentGSlide(3)"></span>
                <span class="dot" onclick="currentGSlide(4)"></span>
                <span class="dot" onclick="currentGSlide(5)"></span>
                <span class="dot" onclick="currentGSlide(6)"></span>
                <span class="dot" onclick="currentGSlide(7)"></span>
                <span class="dot" onclick="currentGSlide(8)"></span>
                <span class="dot" onclick="currentGSlide(9)"></span>
                <span class="dot" onclick="currentGSlide(10)"></span>
                <span class="dot" onclick="currentGSlide(11)"></span>
                <span class="dot" onclick="currentGSlide(12)"></span>
                <span class="dot" onclick="currentGSlide(13)"></span>
              </div> -->
            </div>
          </div>
        </div>
      </div>
      <div class="div" style="display: none;" id = "TrainPower" imgFile = "/static/Orig_TrainGraphs_Transient/TrainPower.png" ></div>
      <div class="div" style="display: none;" id = "TrainSpeed" imgFile = "/static/Orig_TrainGraphs_Transient/TrainSpeed.png"></div>
      <div class="div" style="display: none;" id = "TrainAcceleration" imgFile = "/static/Orig_TrainGraphs_Transient/TrainAcceleration.png"></div>
      <div class="div" style="display: none;" id = "TrainCurrent" imgFile = "/static/Orig_TrainGraphs_Transient/TrainCurrent.png"></div>
      <div class="div" style="display: none;" id = "TrainDistance" imgFile = "/static/Orig_TrainGraphs_Transient/TrainDistance.png"></div>
      <div class="div" style="display: none;" id = "TrainLocation" imgFile = "/static/Orig_TrainGraphs_Transient/TrainLocation.png"></div>
      

      <div class="modal transient-train-graph-modal" id="TransientTrainGraphModal" role="dialog"
        aria-labelledby="TransientTrainGraphModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header text-center">
              <h4 class="modal-title w-100 font-weight-bold">Live Train Graphs</h4>
              <button type="button" id="train_graph_close" class="close" data-dismiss="modal" aria-label="Close"><span
                  aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body mx-3">
              <div class="mySlides">
                <img id="TrainAcceleration" src="{% static 'Orig_TrainGraphs_Transient/TrainAcceleration.png' %}"
                  style="width:100%">
              </div>
              <div class="mySlides">
                <img id="TrainCurrent" src="{% static 'Orig_TrainGraphs_Transient/TrainCurrent.png' %}"
                  style="width:100%">
              </div>
              <div class="mySlides">
                <img id="TrainDistance" src="{% static 'Orig_TrainGraphs_Transient/TrainDistance.png' %}"
                  style="width:100%">
              </div>
              <div class="mySlides">
                <img id="TrainLocation" src="{% static 'Orig_TrainGraphs_Transient/TrainLocation.png' %}"
                  style="width:100%">
              </div>
              <div class="mySlides">
                <img id="TrainPower" src="{% static 'Orig_TrainGraphs_Transient/TrainPower.png' %}" style="width:100%">
              </div>
              <div class="mySlides">
                <img id="TrainSpeed" src="{% static 'Orig_TrainGraphs_Transient/TrainSpeed.png' %}" style="width:100%">
              </div>
            </div>
            <a class="prev" onclick="plusSlides(-1)">❮</a>
            <a class="next" onclick="plusSlides(1)">❯</a>
            <div class="graph-type-options" style="text-align:center">
              <span class="dot" onclick="currentSlide(1)"></span>
              <span class="dot" onclick="currentSlide(2)"></span>
              <span class="dot" onclick="currentSlide(3)"></span>
              <span class="dot" onclick="currentSlide(4)"></span>
              <span class="dot" onclick="currentSlide(5)"></span>
              <span class="dot" onclick="currentSlide(6)"></span>
            </div>
          </div>
        </div>
      </div>
  </section>
</body>
<!-- end about section -->
{% endblock %}

{% block javascript %}
<!-- {% comment %} <script src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
  <script src="{% static 'js/bootstrap.js' %}"></script>
  <script src="{% static 'js/select2.min.js' %}"></script> {% endcomment %} -->
<script src="../static/js/map-resize.min.js"></script>
<script>
  imageMapResize();
</script>
<script>
  const hoverOptions = [
    {
      label: "34 St-Hudson Yards",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJY_qlmg_C-hTQa4zGF5qW0K2rhdMXmvQo_RM093bIds6dTyT9YKjsfUsjcJ66BPRYyY5eDEdp-w9uZBh-MHKNT7r50RLOgJgp0mBkXjI5qK0Oa2HTr2cK0YF3dQbGHv5XU0nsIlvTHmOAz7mFqwisVpQSHDJp5kO5MRhiBUtNOcEri9&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=59272",
      cords: {
        top: "30.2%",
        left: "4%"
      }
    },
    {
      label: "Times Sq–42 St",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJb_s5JofG-icrYPO5cuXibbVcaTq7O5_FkAjoYM4e2uCDjHTU2PsdNSqwEMFpsyQ2JaqvD3KwRD5eCBxjrQtulbCLmgOo7o54WSwmIDIKCi4Jp4qrtnPBHOWZThCMNFWeyURxO4_ltrQGKYQqAnlGBnwQHHiB5kXKuu1xf0vDRr2UnH&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=115897",
      cords: {
        top: "31.4%",
        left: "11%"
      }
    },
    {
      label: "5 Av",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJa1K0imrwhEiL6XL_fmOuzGg5Af2Jjuwrg8UY9j-ln1ZNHZYQWi8boTZSm2jzncGwpE1FVZWSVVIYSqW-HdFJkatX_KyFib8d76heBeD4IbNlykz5W6-Tk-TjA1oXS2mH-a8z-d9I3UIuGmnCUv0KE9N1-Tek49O769L5efIq1BFa7C&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=127444",
      cords: {
        top: "35.2%",
        left: "14.7%"
      }
    },
    {
      label: "Grand Central-42 St",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJbidL3caI5o0MpsNCeaqUtRIOAG8nfli3bBci4_QsbJFZvFlBtAHYONij34plrCyvCTP5YWtfifPDDqTff7T9t_c9VBP_PKFhtEPoEJDDhuVFbuHGsSJM78YTbKbWGtGe0aua0FI_j3ZfI5OEBYmDJfOubBahs4ShW_eru0HvcmFVLt&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=21917",
      cords: {
        top: "37.4%",
        left: "17.4%"
      }
    },
    {
      label: "Vernon Blvd-Jackson Av",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJZVds26IjnAKnLJqRFJjTSwcdisMo6LyiU2byVg36HCqM8AS6hvIURABS1OlOIz47Sg_ithIrxax6j6mloZdjcoVNHVmtA1iWcIRLXpRlv2Gf-v_LOLoi-VErGOGoXo-BbymaVxpwcFJDrxIuupuS2GoKGv1G9hStonkRF-W6mMvMzO&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=28883",
      cords: {
        top: "49%",
        left: "27.5%"
      }
    },
    {
      label: "Hunters Point Av",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJaRN8NG3B5_yZQjsvzG_StDyX_6QuqCvgYh4VDtQ_4QmGOncENmmGyMwRdAP_fJoIjCsAozGN90-XnIhWNS-vuZ3VgC7vubVaOV1gx9ZdjcHFTK0CvrHfU7v3jmlyI0X6V63h443qXfDZcYG74GPwBsGR1oOWxT1JPPzpuOunOD2L3i&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=69661",
      cords: {
        top: "51%",
        left: "30%"
      }
    },
    {
      label: "Court Sq",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJYBNGN1IkAvdmAQYVEB3rV3hhvOVXXNpNsoiiNWIeBkA3R9ZQ3ud2zXGYbap0B69fZi0OYRQQUpYPACTYWwYXfFTco3IphmXaK4dyPlJ1GzjJ8cyOUQrkHO42JYN8Vylynl387qJtKVsys5N4scjsXjt4Bf_a54iJOJgQDZ1l-crkW2&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=56413",
      cords: {
        top: "44.4%",
        left: "32.4%"
      }
    },
    {
      label: "Queensboro Plaza",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJbrBRhm1NKMEzx_w_jpa3qFCnPQTJfyMnPEkzZ4hjVd4kr3co7z5GgyXKj4L1njCHYgBPSsD71vYpYF5JV8MyaClSzSnA3Hdpuw8YtlDg7nfdMmpy9G2yzWP3l3I1s3jJ9dVQNLNzMHYEPISpCQqyl4i7N6aFQz2ap6wKmk7Zi-qeRk&4u16383&5m1&2e1&callback=none&key=AIzaSyDn8VcdTA0P4Smn8HU3ygF-UbnWKVYdXkA&token=89048",
      cords: {
        top: "38.8%",
        left: "34.7%"
      }
    },
    {
      label: "33 St-Rawson St",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJZ_ncdTgDqf3XLa4w3JJTNOfgT0S5_qK6RriOuNv6da0-L0ZNsOdRwipAF7ccPA6-WLaW7uOWSU1wQSydlB3kkqXYieMeWacC1-A1hL2_kRf3BBKBropue-04AQ5xSIVuyq-ySwJZTYcOqkllEW_Eyh7ZlyRnRYVwItA6iYlYJT4dgH&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=85620",
      cords: {
        top: "43.2%",
        left: "38.5%"
      }
    },
    {
      label: "40 St-Lowery St",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJZzP1bjxiEx-sxEbQnHWlHbIah6kRiG1YMfiUaew_kCQSJ22PxEAJAwEjs6thcmrED-6vyKaLYvITwhtYCuwC6-XjVY3JuH9NqG6u7vSgW6_n6VmmRO-O8pUfDJL4sK9yJnwypTbCNrDmiRNye4OGpkW-pHdAQAm0KY5nrm_h6e2LDh&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=111622",
      cords: {
        top: "48.5%",
        left: "42%"
      }
    },
    {
      label: "46 St-Bliss St",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJaNKiZswFYFvb2FtqniqqbBUWrUf_-49g3lRVtNh8MvWtkOhpOJLe_csx-yuTqfQHy4DNRH10NpduTeWy_p7Xb1t_K37H9IUxp7i6ImoWRjhKkaGh_pcmnZiwNHM-UHYTCQRLVxFjCW6TWMg0-sn1kxSutR8v_3mv_TX0iGmftJAD4&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=22474",
      cords: {
        top: "49%",
        left: "45%"
      }
    },
    {
      label: "52 St",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJYBNthCAXYfyS4zwa-DxxVTn9afA6WTDoFKahqO3ZoP-qe_eoknHqBj6rpciYowXR2x9zsZ1RWSmToKYDLi_X-Uqlf1oknCGVjlocaCgQWZ2LHPGJPf9owGS7j_1Z1mcAi9FlpSMPUUIJZODUt5wxPY7XAhhwbyARLfKlyNxmbCJgmi&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=28425",
      cords: {
        top: "50%",
        left: "48%"
      }
    },
    {
      label: "61 St-Woodside",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJYA6MuErfgqnV11MNdJIRU6uJScpzT_PejOu87ASVOyXoa7EbOp1b2moGzgsQPNqdz0NDgesjtDJv40bRnnnr4gSiADWYAFNi3VUTQCQJbaL1zeXiqxpsqSWrDk4LtMJyu8J_Js661m3f3265uTdrLiChUVjOZ9VjyArZywYaBPlIQr&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=41975",
      cords: {
        top: "47%",
        left: "54%"
      }
    },
    {
      label: "69 St",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJbH5JcE9RIUkZSMrvA-Zt0HDfbWkzt6byrvZ2SVXXUnq2Jn8QxaDsxWrhkBdNdstUzl0YSQsvwBqY6Jt4Bh-Wenr6D3Nh7Jw_ei0vmSy9O4wLMvr3UoXDArNxQFL7Yv0XX44yQsR2KSWx4_GNMSfnhocTiSUbeQkZd61ezPlZjRUSqF&4u16383&5m1&2e1&callback=none&key=AIzaSyDn8VcdTA0P4Smn8HU3ygF-UbnWKVYdXkA&token=20527",
      cords: {
        top: "45.4%",
        left: "59.3%"
      }
    },
    {
      label: "74 St-Broadway",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJaTo7x4CcDYz4Ym-TvqQzcy52wzM3w60J5A3HCETxbY0ud9WftbAhPS1LKWNKZM1bcqt8xLSlkwx1ZxKzqmN8s4U7As57vuQIC6QkW1QHBZNnGOD43lXewIYEFk6sstTxL3kZzfV_YNJx0B1y2_6ERLnjLypvWN3i5aOpkCh5lmUg9S&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=50557",
      cords: {
        top: "44.6%",
        left: "61.7%"
      }
    },
    {
      label: "82 St-Jackson Hts",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJYoRak0fQMD0EyPgaISbR2vQpcFQSG6A0N3PMnChxekZv1i9x9S28fZm3hBuAZkCeQhJfjE2RTR7LRhc3ojhMN6H8XdZVX-hkRQbqwns2v2rwP7JejJrlEwumDJZA1P6CEoF_6fOOD4e_KKz-u0MolPDZkU89crHGTlRwiOocfpZ4ym&4u16383&5m1&2e1&callback=none&key=AIzaSyDn8VcdTA0P4Smn8HU3ygF-UbnWKVYdXkA&token=99725",
      cords: {
        top: "43.4%",
        left: "65.7%"
      }
    },
    {
      label: "90 St-Elmhurst Av",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJY_Rme-HpmqeLuptfCMDY006ujuxO__XksWmNGWodxCgR87GZnlbc3kftCX21F4lxvVrbtSKN10Bo_lu6nSPIJItw2fLtIl3p4qOlrhIwPh7v0xtPy7hhLRINhWaCjUOPmXbAtsTU34PMy4BT7bWQPV2TKNJYZUS_OPIA99ZWc2RvQk&4u16383&5m1&2e1&callback=none&key=AIzaSyDn8VcdTA0P4Smn8HU3ygF-UbnWKVYdXkA&token=9232",
      cords: {
        top: "42%",
        left: "69.5%"
      }
    },
    {
      label: "Junction Blvd",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJZ5tG3p2nq7o-CFnMJb0u7OkTSpAkgJDBZYxtf5jPkbF6mf9dQkyZlOUtoKfy3bZk9BMr_bp8zBFvcpVUjsyOlJdV7jEbYidsoPohaI6vqehXypKusikColxvPJXnEUep02IXj5vyBvxJcXspIx-u18AH0GyN3-QUP8s1hqqILAcGtU&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=113993",
      cords: {
        top: "41%",
        left: "73.4%"
      }
    },
    {
      label: "103 St–Corona Plaza",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJYUkrGi5ihWjoJWOvCwDIqo6p71w36H30ASlVgbLn9-n2gUAzJRLnvnhwmGQTDPn1JIH0YjzfdckO4WngTCuxT6HSC8MAkTgKiigWN8n49Zi7bClEiNqKfNYJ76V_jVID-V6dvvhmCt5EC0dGhXuKwgFroxEDK-MqxZeCchHCRz8rXO&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=98099",
      cords: {
        top: "40%",
        left: "76.9%"
      }
    },
    {
      label: "111 St",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJZwLvP-dlLXO-1FT2ix1XaFJ-8Klg_ptjhyLLBXCGFG7VQHVZ38Fe7qpriH4U__n703UbrHdmbdyhk9ZCaUXXIYOPoOJrcFgy_8gZW9MbnrrkRK_0acxm1isK3Z-GOQi8WUQ1g5Pb7MFvyZpaH09CtogM27LQSlaB42z651Hp8-1YAV&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=65646",
      cords: {
        top: "37.5%",
        left: "80.5%"
      }
    },
    {
      label: "Mets-Willets Point",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJbiHhSLWYU_igC7JLfct1X9uQoE3tbEs9dr8XjlJ49VmKyjgcOykmIFrFAFhA-5PLyQVPQz69trTW6tGwHxOOg-TW7h6lLaqV-RYtpMrB9h9pJaowSYSZ5mLVueYigq4Qafzg7TJ3VB_T457L-K12ZAbDe3Gd2RzZkuzZARt7kdmzGH&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=96655",
      cords: {
        top: "33.4%",
        left: "85.5%"
      }
    },
    {
      label: "Flushing-Main St",
      imgSrc: "https://maps.googleapis.com/maps/api/place/js/PhotoService.GetPhoto?1sATplDJY7Cj7O8bjPlWZhshPXT67_NzUr7GNNvFZ8DfJrT1knk1RF1t3TCdtLEyWeO7j2hEUHT_nG1Jo1rqoRHLUb4IrQfbBZ2n_x1-g6Y0TJMB0WfyNwvQ9uqdLPIO07iNOcr71XimaehiSpc2DbPNDYdf96Khtjf_zKblY-bZ263q63o8ES&4u16383&5m1&2e1&callback=none&client=google-maps-pro&token=14481",
      cords: {
        top: "26.8%",
        left: "93.5%"
      }
    },
  ];
  const liveSumilation = [
    "TrainPower",
    "TrainSpeed",
    "TrainAcceleration",
    "TrainCurrent",
    "TrainDistance",
    "TrainLocation"
  ]
  const powerHouses = [
    {

      "data-toggle": "tooltip",
      "data-placement": "top",
      "index": 1,
      alt: "34 St-Hudson Yards Substation",
      "id": "Hudson34",
      "title": "34 St-Hudson Yards Substation",
      "image_file": "{% static 'OrigGraphs_SteadyState/Hudson34.png' %}",
      "transient_image_file": "{% static 'OrigGraphs_Transient/Hudson34.png' %}",
      "cords": { left: "3.5%", top: "38%" },
      "class": "mta7_lines power-station"
    },
    {
      "data-toggle": "tooltip",
      "data-placement": "top",
      "index": 2,
      alt: "10th Ave Substation",
      "id": "Ave10",
      "title": "10th Ave Substation",
      "image_file": "{% static 'OrigGraphs_SteadyState/Ave10.png' %}",
      "transient_image_file": "{% static 'OrigGraphs_Transient/Ave10.png' %}",
      "cords": { left: "6.5%", top: "32%" },
      "class": "mta7_lines power-station"
    },
    {
      "data-toggle": "tooltip",
      "data-placement": "top",
      "index": 3,
      alt: "7 Ave-43 St Substation",
      "id": "Ave7",
      "title": "7 Ave-43 St Substation",
      "image_file": "{% static 'OrigGraphs_SteadyState/Ave7.png' %}",
      "transient_image_file": "{% static 'OrigGraphs_Transient/Ave7.png' %}",
      "cords": { left: "10%", top: "35.6%" },
      "class": "mta7_lines power-station"
    },
    {
      "data-toggle": "tooltip",
      "data-placement": "top",
      "index": 4,
      alt: "Park Ave-41 St Substation",
      "id": "Park",
      "title": "Park Ave-41 St Substation",
      "image_file": "{% static 'OrigGraphs_SteadyState/Park.png' %}",
      "transient_image_file": "{% static 'OrigGraphs_Transient/Park.png' %}",
      "cords": { left: "14%", top: "40%" },
      "class": "mta7_lines power-station"
    },
    {
      "data-toggle": "tooltip",
      "data-placement": "top",
      "index": 5,
      alt: "Tudor Substation",
      "id": "Tudor",
      "title": "Tudor Substation",
      "image_file": "{% static 'OrigGraphs_SteadyState/Tudor.png' %}",
      "transient_image_file": "{% static 'OrigGraphs_Transient/Tudor.png' %}",
      "cords": { left: "18%", top: "43.79%" },
      "class": "mta7_lines power-station"
    },
    {
      "data-toggle": "tooltip",
      "data-placement": "top",
      "index": 6,
      alt: "50 Ave-11 St Substation",
      "id": "Ave50",
      "title": "50 Ave-11 St Substation",
      "image_file": "{% static 'OrigGraphs_SteadyState/Ave50.png' %}",
      "transient_image_file": "{% static 'OrigGraphs_Transient/Ave50.png' %}",
      "cords": { left: "29%", top: "55.5%" },
      "class": "mta7_lines power-station"
    },
    {
      "data-toggle": "tooltip",
      "data-placement": "top",
      "index": 7,
      alt: "Jackson Ave-West St Substation",
      "id": "Jackson",
      "title": "Jackson Ave-West St Substation",
      "image_file": "{% static 'OrigGraphs_SteadyState/Jackson.png' %}",
      "transient_image_file": "{% static 'OrigGraphs_Transient/Jackson.png' %}",
      "cords": { left: "37%", top: "46.8%" },
      "class": "mta7_lines power-station"
    },
    {
      "data-toggle": "tooltip",
      "data-placement": "top",
      "index": 8,
      alt: "Queens Blvd-39 Place Substation",
      "id": "QueensBlvd",
      "title": "Queens Blvd-39 Place Substation",
      "image_file": "{% static 'OrigGraphs_SteadyState/QueensBlvd.png' %}",
      "transient_image_file": "{% static 'OrigGraphs_Transient/QueensBlvd.png' %}",
      "cords": { left: "43.4%", top: "53.5%" },
      "class": "mta7_lines power-station"
    },
    {
      "data-toggle": "tooltip",
      "data-placement": "top",
      "index": 9,
      alt: "58 St Substation",
      "id": "St58",
      "title": "58 St Substation",
      "image_file": "{% static 'OrigGraphs_SteadyState/St58.png' %}",
      "transient_image_file": "{% static 'OrigGraphs_Transient/St58.png' %}",
      "cords": { left: "54%", top: "51.3%" },
      "class": "mta7_lines power-station"
    },
    {
      "data-toggle": "tooltip",
      "data-placement": "top",
      "index": 10,
      alt: "Roosevelt-78 St Substation",
      "id": "St78",
      "title": "Roosevelt-78 St Substation",
      "image_file": "{% static 'OrigGraphs_SteadyState/St78.png' %}",
      "transient_image_file": "{% static 'OrigGraphs_Transient/St78.png' %}",
      "cords": { left: "63.5%", top: "49%" },
      "class": "mta7_lines power-station"
    },
    {
      "data-toggle": "tooltip",
      "data-placement": "top",
      "index": 11,
      alt: "Roosevelt-Spruce St Substation",
      "id": "Spruce",
      "title": "Roosevelt-Spruce St Substation",
      "image_file": "{% static 'OrigGraphs_SteadyState/Spruce.png' %}",
      "transient_image_file": "{% static 'OrigGraphs_Transient/Spruce.png' %}",
      "cords": { left: "75%", top: "45.5%" },
      "class": "mta7_lines power-station"
    },
    {
      "data-toggle": "tooltip",
      "data-placement": "top",
      "index": 12,
      alt: "Corona Yard Substation",
      "id": "Corona",
      "title": "Corona Yard Substation",
      "image_file": "{% static 'OrigGraphs_SteadyState/Corona.png' %}",
      "transient_image_file": "{% static 'OrigGraphs_Transient/Corona.png' %}",
      "cords": { left: "83.5%", top: "40.5%" },
      "class": "mta7_lines power-station"
    },
    {
      "data-toggle": "tooltip",
      "data-placement": "top",
      "index": 13,
      alt: "Lawrence Substation",
      "id": "Lawrence",
      "title": "Lawrence Substation",
      "image_file": "{% static 'OrigGraphs_SteadyState/Lawrence.png' %}",
      "transient_image_file": "{% static 'OrigGraphs_Transient/Lawrence.png' %}",
      "cords": { left: "91%", top: "33.6%" },
      "class": "mta7_lines power-station"
    }
  ];
  const parentElement = document.getElementById('new-content');
  hoverOptions.forEach((val, ids) => {
    let html = `<div class="hoverMe">
        <img src="{% static 'images/trainLogo.png' %}" class = "logoImage"/>
              <div class="stationInfo">
                <div class="parentStationDetails">
                  <img src="${val.imgSrc}" alt="img" height="auto" width="100%">
                  <div class="headingParent">
                    <span class="stationName" >${val.label}</span>
                  </div>
                  <div class="downArrow"></div>
                </div>
                <div class="hiddenSpaceManager"><span class="hiddenText">hi</span></div>
    
              </div>
            </div>`;
    if (ids === hoverOptions.length - 1 || ids === hoverOptions.length - 2) {
      html = `<div class="hoverMe" >
        <img src="{% static 'images/trainLogo.png' %}" class = "logoImage"/>
              <div class="stationInfo lastStation">
                <div class="parentStationDetails">
                  <img src="${val.imgSrc}" alt="img" height="auto" width="100%">
                  <div class="headingParent">
                    <span class="stationName" >${val.label}</span>
                  </div>
                  
                  <div class="downArrow lastArrow"></div>
                </div>
                <div class="hiddenSpaceManager"><span class="hiddenText">hi</span></div>
    
              </div>
            </div>`
    }
    const pointer = document.createElement('div');
    pointer.classList.add('pointer');
    pointer.style.top = val.cords.top;
    pointer.style.left = val.cords.left;
    pointer.innerHTML = html
    parentElement.appendChild(pointer);
  });
  const handleRenderGraph = (index) => {
    let idx = index;
    const parent = document.createElement('div');
    // const referenceDiv = document.getElementById(va]);
    parent.tabIndex = -1;
    parent.classList.add('graphContainerParent');
    parent.addEventListener("keydown", function (e) {
      console.log({ key: e.key })
      const key = e.key;
      if (key === "ArrowLeft") {
        const prev = document.getElementsByClassName('graphContainerSelected')[0];
        let id = prev.index;
        console.log({ id })
        if (id > powerHouses.length) {
          id = 1;
        }
        if (id > 1) {

          const overflowenDiv = document.getElementById("overflowenDiv");
          overflowenDiv.style.transform = `translateX(${(id - 3) * -30}vw)`;
          prev.classList.add('graphContainer');
          prev.classList.remove('graphContainerSelected');
          const current = document.getElementById(`${powerHouses[id - 2].id}_graphContainer`);
          current.classList.add('graphContainerSelected');
          current.classList.remove('graphContainer');
        }
      }
      else if (key === "ArrowRight") {
        const prev = document.getElementsByClassName('graphContainerSelected')[0];
        let id = prev.index;
        console.log({ id })
        if (id < 1) {
          id = powerHouses.length;
        }
        if (id <= powerHouses.length - 1) {
          const overflowenDiv = document.getElementById("overflowenDiv");
          overflowenDiv.style.transform = `translateX(${(id - 1) * -30}vw)`;
          prev.classList.add('graphContainer');
          prev.classList.remove('graphContainerSelected');
          const current = document.getElementById(`${powerHouses[id].id}_graphContainer`);
          current.classList.add('graphContainerSelected');
          current.classList.remove('graphContainer');
        }
      }
    })
    parent.id = "graphContainerParent";
    const innerParent = document.createElement('div');
    innerParent.classList.add('graphInnerContainer');
    innerParent.id = "graphInnerContainer";
    const overflowenDiv = document.createElement('div');
    overflowenDiv.classList.add('overflowenDiv');
    overflowenDiv.id = "overflowenDiv";
    overflowenDiv.style.transform = `translateX(${(idx - 2) * -30}vw)`;
    powerHouses.map((val, ids) => {
      const referenceDiv = document.getElementById(val.id);
      console.log({ referenceDiv: referenceDiv.attributes.image_file.value })
      const graphContainer = document.createElement('div');
      graphContainer.addEventListener("click", function () {
        parent.focus();
      })
      graphContainer.id = `${val.id}_graphContainer`;
      graphContainer.index = val.index;
      const subParentGraphContainer = document.createElement('div');
      subParentGraphContainer.classList.add('subParentGraphContainer');
      if (ids + 1 == idx) {
        graphContainer.classList.add('graphContainerSelected');
      }
      else {
        graphContainer.classList.add('graphContainer');
      }
      const heading = document.createElement("span");
      heading.classList.add('graphHeading');
      heading.innerHTML = val.alt;
      const graph = document.createElement('img');
      graph.src = referenceDiv.attributes.image_file.value;
      graph.classList.add('graphImage');
      graph.id = `${val.id}_graph`;
      const changeSelctionsButtons = document.createElement("button");
      changeSelctionsButtons.classList.add('changeSelctionsButtons');
      changeSelctionsButtons.addEventListener("click", function () {
        const idd = val.index;
        parent.focus();
        const overflowenDiv = document.getElementById("overflowenDiv");
        overflowenDiv.style.transform = `translateX(${(idd - 2) * -30}vw)`;
        const prev = document.getElementsByClassName('graphContainerSelected')[0];
        prev.classList.add('graphContainer');
        prev.classList.remove('graphContainerSelected');
        const current = document.getElementById(`${val.id}_graphContainer`);
        current.classList.add('graphContainerSelected');
        current.classList.remove('graphContainer');
      })
      subParentGraphContainer.appendChild(heading);
      subParentGraphContainer.appendChild(graph);

      subParentGraphContainer.appendChild(changeSelctionsButtons);
      graphContainer.appendChild(subParentGraphContainer);
      // subParentGraphContainer.appendChild(toggleDiv);
      overflowenDiv.appendChild(graphContainer);
    })
    const toggleDiv = document.createElement('div');
    toggleDiv.classList.add('toggleDiv');
    const hour24 = document.createElement('button');
    hour24.innerHTML = "24 Hours";
    hour24.classList.add('toggleButton');
    hour24.classList.add('selectedButton');
    const liveButton = document.createElement('button');
    liveButton.addEventListener("click", function () {
      const liveButton = document.getElementsByClassName('toggleButton')[1];
      const hour24Button = document.getElementsByClassName('toggleButton')[0];
      liveButton.classList.add('selectedButton');
      hour24Button.classList.remove('selectedButton');
      powerHouses.map((val, ids) => {
        const referenceDiv = document.getElementById(val.id);
        const graph = document.getElementById(`${val.id}_graph`);
        graph.src = referenceDiv.attributes.transient_image_file.value;
      })
    })
    const status = document.createElement('div');
    hour24.addEventListener("click", function () {
      const liveButton = document.getElementsByClassName('toggleButton')[1];
      const hour24Button = document.getElementsByClassName('toggleButton')[0];
      liveButton.classList.remove('selectedButton');
      hour24Button.classList.add('selectedButton');
      powerHouses.map((val, ids) => {
        const referenceDiv = document.getElementById(val.id);
        const graph = document.getElementById(`${val.id}_graph`);
        graph.src = referenceDiv.attributes.image_file.value;
      })
    })
    status.classList.add('status');
    liveButton.innerHTML = "Live";
    liveButton.classList.add('toggleButton');
    toggleDiv.appendChild(status);
    toggleDiv.appendChild(hour24);
    toggleDiv.appendChild(liveButton);
    innerParent.appendChild(overflowenDiv);
    innerParent.appendChild(toggleDiv);
    const crossButton = document.createElement('button');
    crossButton.classList.add('crossButton');
    crossButton.innerHTML = "⨯";
    crossButton.addEventListener("click", function () {
      // document.getElementById('new-content').removeChild(document.getElementById('graphContainerParent'));
      const parent = document.getElementById('graphContainerParent');
      parent.style.display = "none";
      parent.remove();
    })
    parent.appendChild(innerParent);
    parent.appendChild(crossButton);
    document.getElementById('new-content').appendChild(parent);
    parent.focus();
  }
  const handleRenderGraphLive = (index) => {
    let idx = index;
    console.log("entered")
    const parent = document.createElement('div');
    // const referenceDiv = document.getElementById(va]);
    parent.tabIndex = -1;
    parent.classList.add('graphContainerParent');
    parent.addEventListener("keydown", function (e) {
      console.log({ key: e.key })
      const key = e.key;
      if (key === "ArrowLeft") {
        const prev = document.getElementsByClassName('graphContainerSelectedForLive')[0];
        let id = prev.index;
        console.log({ id })
        if (id > liveSumilation.length) {
          id = 1; 
        }
        if (id > 1) {

          const overflowenDiv = document.getElementById("overflowenDiv");
          overflowenDiv.style.transform = `translateX(${(id - 3) * -30}vw)`;
          prev.classList.add('graphContainerForLive');
          prev.classList.remove('graphContainerSelectedForLive');
          const current = document.getElementById(`${liveSumilation[id - 2]}_graphContainer`);
          current.classList.add('graphContainerSelectedForLive');
          current.classList.remove('graphContainerForLive');
        }
      }
      else if (key === "ArrowRight") {
        const prev = document.getElementsByClassName('graphContainerSelectedForLive')[0];
        let id = prev.index;
        console.log({ id })
        if (id < 1) {
          id = liveSumilation.length;
        }
        if (id <= liveSumilation.length - 1) {
          const overflowenDiv = document.getElementById("overflowenDiv");
          overflowenDiv.style.transform = `translateX(${(id - 1) * -30}vw)`;
          prev.classList.add('graphContainerForLive');
          prev.classList.remove('graphContainerSelectedForLive');
          const current = document.getElementById(`${liveSumilation[id]}_graphContainer`);
          current.classList.add('graphContainerSelectedForLive');
          current.classList.remove('graphContainerForLive');
        }
      }
    })
    parent.id = "graphContainerParent";
    const innerParent = document.createElement('div');
    innerParent.classList.add('graphInnerContainer');
    innerParent.id = "graphInnerContainer";
    const overflowenDiv = document.createElement('div');
    overflowenDiv.classList.add('overflowenDiv');
    overflowenDiv.id = "overflowenDiv";
    overflowenDiv.style.transform = `translateX(${(idx - 2) * -30}vw)`;
    liveSumilation.map((val, ids) => {
      const referenceDiv = document.getElementById(val);
      console.log({ referenceDiv: referenceDiv , val })
      const graphContainer = document.createElement('div');
      graphContainer.addEventListener("click", function () {
        parent.focus();
      })
      graphContainer.id = `${val}_graphContainer`;
      graphContainer.index = ids+1;
      const subParentGraphContainer = document.createElement('div');
      subParentGraphContainer.classList.add('subParentGraphContainer');
      if (ids + 1 == idx) {
        graphContainer.classList.add('graphContainerSelectedForLive');
      }
      else {
        graphContainer.classList.add('graphContainerForLive');
      }
      // const heading = document.createElement("span");
      // heading.classList.add('graphHeading');
      // heading.innerHTML = "";
      const graph = document.createElement('img');
      graph.src = `..${referenceDiv.attributes.imgFile.value}`;
      graph.classList.add('graphImageForLive');
      graph.id = `${val}_graph`;
      const changeSelctionsButtons = document.createElement("button");
      changeSelctionsButtons.classList.add('changeSelctionsButtons');
      changeSelctionsButtons.addEventListener("click", function () {
        const idd = ids+1;
        parent.focus();
        const overflowenDiv = document.getElementById("overflowenDiv");
        overflowenDiv.style.transform = `translateX(${(idd - 2) * -30}vw)`;
        const prev = document.getElementsByClassName('graphContainerSelectedForLive')[0];
        prev.classList.add('graphContainerForLive');
        prev.classList.remove('graphContainerSelectedForLive');
        const current = document.getElementById(`${val}_graphContainer`);
        console.log({ current })
        current.classList.add('graphContainerSelectedForLive');
        current.classList.remove('graphContainerForLive');
      })
      // subParentGraphContainer.appendChild(heading);
      subParentGraphContainer.appendChild(graph);

      subParentGraphContainer.appendChild(changeSelctionsButtons);
      graphContainer.appendChild(subParentGraphContainer);
      // subParentGraphContainer.appendChild(toggleDiv);
      overflowenDiv.appendChild(graphContainer);
    })
    const toggleDiv = document.createElement('div');
    toggleDiv.classList.add('toggleDiv');
    const hour24 = document.createElement('button');
    hour24.innerHTML = "24 Hours";
    hour24.classList.add('toggleButton');
    hour24.classList.add('selectedButton');
    const liveButton = document.createElement('button');
    liveButton.addEventListener("click", function () {
      const liveButton = document.getElementsByClassName('toggleButton')[1];
      const hour24Button = document.getElementsByClassName('toggleButton')[0];
      liveButton.classList.add('selectedButton');
      hour24Button.classList.remove('selectedButton');
      liveSumilation.map((val, ids) => {
        const referenceDiv = document.getElementById(val);
        const graph = document.getElementById(`${val}_graph`);
        graph.src = referenceDiv.attributes.imgFile.value;
      })
    })
    const status = document.createElement('div');
    hour24.addEventListener("click", function () {
      const liveButton = document.getElementsByClassName('toggleButton')[1];
      const hour24Button = document.getElementsByClassName('toggleButton')[0];
      liveButton.classList.remove('selectedButton');
      hour24Button.classList.add('selectedButton');
      powerHouses.map((val, ids) => {
        const referenceDiv = document.getElementById(val.id);
        const graph = document.getElementById(`${val}_graph`);
        graph.src = referenceDiv.attributes.imgFile.value;
      })
    })
    status.classList.add('status');
    liveButton.innerHTML = "Live";
    liveButton.classList.add('toggleButton');
    toggleDiv.appendChild(status);
    toggleDiv.appendChild(hour24);
    toggleDiv.appendChild(liveButton);
    innerParent.appendChild(overflowenDiv);
    // innerParent.appendChild(toggleDiv);
    const crossButton = document.createElement('button');
    crossButton.classList.add('crossButton');
    crossButton.innerHTML = "⨯";
    crossButton.addEventListener("click", function () {
      // document.getElementById('new-content').removeChild(document.getElementById('graphContainerParent'));
      const parent = document.getElementById('graphContainerParent');
      parent.style.display = "none";
      parent.remove();
    })
    parent.appendChild(innerParent);
    parent.appendChild(crossButton);
    document.getElementById('new-content').appendChild(parent);
    parent.focus();
  }


  powerHouses.forEach((val, iddd) => {

    const div = document.createElement('div');
    div.dataset.toggle = val["data-toggle"];
    div.dataset.placement = val["data-placement"];
    div.setAttribute('index', val.index);
    div.id = val.id;
    div.title = val.title;
    div.className = `${val.class} powerPointer`;
    div.setAttribute('image_file', val.image_file);
    div.setAttribute('alt', val.alt);
    div.setAttribute('transient_image_file', val.transient_image_file);
    div.style.top = val.cords.top;
    div.style.left = val.cords.left;
    const innerDiv = document.createElement('div');
    innerDiv.style.width = '100%';
    innerDiv.style.height = '100%';
    innerDiv.style.position = 'relative';
    innerDiv.id = `${val.id}_inner`;
    innerDiv.style.display = "flex";
    // Create the img element
    const img = document.createElement('img');
    img.src = "{% static 'images/electricityLogo2.png' %}";
    img.style.width = '100%';
    img.style.height = '100%';
    // Append the img to the div
    innerDiv.appendChild(img);
    div.appendChild(innerDiv);
    // Add the event listener
    div.addEventListener("click", () => {
      handleRenderGraph(val.index);
    })
    div.addEventListener("mouseenter", function () {
      const parent = document.getElementById(val.id);
      parent.style.zIndex = 1;
      const element = document.getElementById(`${val.id}_inner`);
      console.log({ parent: parent })
      if (!document.getElementById(`${val.id}_graph`)) {
        const generateUniqueId = () => {
          return (
            new Date().getTime() +
            "" +
            Math.floor(Math.random() * 10000000)
          );
        };
        const referenceDiv = document.getElementById(val.id);
        const html = `<div id = "${val.id}_graph" style="display : flex; z-index : 101;" class="${(iddd === powerHouses.length - 1 || iddd === powerHouses.length - 2) ? "stationInfoRev" : "stationInfo"}">
                <div class="parentPowerStationDetails">
                  <img src="${referenceDiv.attributes.image_file.value}" alt="img" height="auto" width="100%">
                  <div class="headingPowerParent">
                    <span class="stationName" >${val.alt}</span>
                  </div>
                  <div class="powerDownArrow"></div>
                </div>
                <div class="hiddenSpaceManager"><span class="hiddenText">hi</span></div>
              </div>`;
        element.innerHTML += html;
      }
    });
    div.addEventListener("mouseleave", function () {
      const parent = document.getElementById(val.id);
      parent.style.zIndex = 0;
      const element = document.getElementById(`${val.id}_graph`);
      if (element) {
        element.remove();
      }
    });
    // Append the div to the parent element
    parentElement.appendChild(div);
  });
  powerHouses.forEach((val) => {
    const element = document.getElementById(val.id);
    console.log({ element })
    element.addEventListener("mouseenter", function () {
      console.log('clicked')
    });
  })
  // handleRenderGraphLive(1);
  var localStations = ['St103', 'St111', 'St82', 'St90', 'St69', 'St74', 'St40', 'St46', 'St52', 'St33']
  let slideIndex = 1;
  showSlides(slideIndex);

  function plusSlides(n) {
    showSlides(slideIndex += n);
  }

  function currentSlide(n) {
    showSlides(slideIndex = n);
  }

  function showSlides(n) {
    let i;
    let slides = document.getElementsByClassName("mySlides");
    let dots = document.getElementsByClassName("dot");
    if (n > slides.length) { slideIndex = 1 }
    if (n < 1) { slideIndex = slides.length }
    for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
    }
    for (i = 0; i < dots.length; i++) {
      dots[i].className = dots[i].className.replace(" active", "");
    }
    slides[slideIndex - 1].style.display = "block";
    dots[slideIndex - 1].className += " active";
  }

  let gIndex = 1
  function plusGSlides(n) {
    let currentActiveSlide = document.getElementsByClassName("active-graph");
    let currentActiveSlideIndex = parseInt($(currentActiveSlide).attr('index'))
    showGraphSlides(currentActiveSlideIndex += n);
  }

  function currentGSlide(n) {
    showGraphSlides(gIndex = n);
  }

  function showGraphSlides(n) {
    var stationDict = { 'Hudson34': '34 St-Hudson Yards Substation', 'Ave10': '10th Ave Substation', 'Ave7': '7 Ave-43 St Substation', 'Park': 'Park Ave-41 St Substation', 'Tudor': 'Tudor Substation', 'Ave50': '50 Ave-11 St Substation', 'Jackson': 'Jackson Ave-West St Substation', 'QueensBlvd': 'Queens Blvd-39 Place Substation', 'St58': '58 St Substation', 'St78': 'Roosevelt-78 St Substation', 'Spruce': 'Roosevelt-Spruce St Substation', 'Corona': 'Corona Yard Substation', 'Lawrence': 'Lawrence Substation' }
    let i;
    let indexCount = 1
    let slides = document.getElementsByClassName("myGSlides");
    for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
      $(slides[i]).removeClass('active-graph')
    }
    console.log(n, "++++ N ++++")
    if (n == 14) {
      indexCount = 1
    }
    else if (n == 0) {
      indexCount = 13
    }
    else {
      indexCount = n
    }
    slides[indexCount - 1].style.display = "block";
    $(slides[indexCount - 1]).addClass('active-graph')
    var keys = Object.keys(stationDict);
    var graphElementValue = stationDict[keys[indexCount - 1]];
    modalTitle.innerHTML = graphElementValue;
    captionText.innerHTML = graphElementValue

  }

  var modal = document.getElementById('myModal')
  var graphModal = document.getElementById('TransientTrainGraphModal')
  var transient_modal = document.getElementById('transient_modal')
  var modalImg = document.getElementById('stedy_img')
  var transient_stedy_img = document.getElementById('transient_img')
  var mta_chat_data = { 'power': {}, 'passenger': {} }
  var transient_data = {}
  var captionText = document.getElementById('caption')
  var modalTitle = document.getElementById('modal-graph-title')
  var mta_modal = document.getElementById('mta_7_line_modal')
  var span = document.getElementsByClassName('mta_close')
  // $('#mta_power_stations').select2();
  // $('#mta_passenger_stations').select2();
  $('#train_graph_close').click(function () {
    $('#TrainAcceleration').attr('src', '/static/Orig_TrainGraphs_Transient/TrainAcceleration.png')
    $('#TrainCurrent').attr('src', '/static/Orig_TrainGraphs_Transient/TrainCurrent.png')
    $('#TrainDistance').attr('src', '/static/Orig_TrainGraphs_Transient/TrainDistance.png')
    $('#TrainLocation').attr('src', '/static/Orig_TrainGraphs_Transient/TrainLocation.png')
    $('#TrainPower').attr('src', '/static/Orig_TrainGraphs_Transient/TrainPower.png')
    $('#TrainSpeed').attr('src', '/static/Orig_TrainGraphs_Transient/TrainSpeed.png')
    $(graphModal).css('display', 'none')
  })
  $(span).click(function () {
    $(mta_modal).css('display', 'none')
    $(transient_modal).css('display', 'none')
    modal.style.display = 'none'
  })
  var powerStation = $('#power_station_option');
  var passengerStation = $('#passenger_station_option');
  var powerStationOption = $('.power_station_option');
  var passengerStationOption = $('.passenger_station_option');

  powerStation.click(function () {
    if ($(this).prop('checked')) {
      powerStationOption.removeClass('d-none');
      passengerStationOption.addClass('d-none');
    }
  });

  passengerStation.click(function () {
    if ($(this).prop('checked')) {
      passengerStationOption.removeClass('d-none');
      powerStationOption.addClass('d-none');
    }
  });
  $('#calculate-record').click(function () {
    var rowCount = $('#station-table tr').length;
    if (rowCount <= 2 && JSON.stringify(transient_data) === '{}') {
      customAlert('Warning!', 'Please modify station or add live train!', 'warning')
      // alert("Please modify station or add live train!"); // Warning
    }
    else {
      html_data = { 'mta_chat_data': mta_chat_data, 'transient_data': transient_data }
      $('.loading').show();
      $.ajax({
        url: '{% url "update_graph_multiple" %}',
        data: {
          value: JSON.stringify(html_data)
        },
        dataType: 'json',
        success: function (data) {
          for (let i = 0; i < data.graphs.length; i++) {
            var areaImg = document.getElementById(data.graphs[i])
            areaImg.setAttribute("image_file", 'static/ModGraphs_SteadyState/' + data.graphs[i] + '.png');
            areaImg.setAttribute("transient_image_file", 'static/ModGraphs_Transient/' + data.graphs[i] + '.png');
          }
          $('.loading').hide();
          customAlert('Success!', 'Graphs updated successfully !', 'success')
          // confirm("Graph updated successfully !"); // Success
          if (data.trasient_part) {
            $('#transient-train-graph').removeClass('d-none')
          }
        },
        error: function (xhr, status, error) {
          $('.loading').hide();
          customAlert('Error!', 'An error occurred while updating the graph. Please try again later.', 'error')
          // alert("An error occurred while updating the graph. Please try again later."); // ERROR
        }
      })
    }

  })
  function transient_check_validation() {
    var validation_fire = 0
    var originStation = $('select[name="origin_station"]')
    var destinationStation = $('select[name="destination_station"]')
    var trainType = $('select[name="train_type"]')
    if (originStation.val() == '') {
      originStation[0].setCustomValidity("Please, Select Origin station")
      originStation[0].reportValidity()
      validation_fire = 1
    }
    if (destinationStation.val() == '') {
      destinationStation[0].setCustomValidity("Please, Select Destination station")
      destinationStation[0].reportValidity()
      validation_fire = 1
    }
    if (originStation.val() == destinationStation.val()) {
      destinationStation[0].setCustomValidity("Please, Select different destination station")
      destinationStation[0].reportValidity()
      validation_fire = 1
    }
    if (trainType.val() == '') {
      trainType[0].setCustomValidity("Please, Select Train type")
      trainType[0].reportValidity()
      validation_fire = 1
    }
    if (validation_fire == 1) {
      return false
    }
    else {
      return true
    }
  }
  function mta_check_validation() {
    var validation_fire = 0
    var mainOption = $('input[name="main-option"]:checked')
    var powerStationValue = $('select[name="power_stations"]')
    var passengerStationValue = $('select[name="passenger_stations"]')
    if (mainOption.val() == 'power' && powerStationValue.val() == '') {
      powerStationValue[0].setCustomValidity("Please, Select Power station")
      powerStationValue[0].reportValidity()
      validation_fire = 1
    }
    if (mainOption.val() == 'passenger' && passengerStationValue.val() == '') {
      passengerStationValue[0].setCustomValidity("Please, Select Passenger station")
      passengerStationValue[0].reportValidity()
      validation_fire = 1
    }
    function validation(e) {
      if ($(e).parent().css('display') == 'block') {
        var min = parseInt($(e).attr('min'))
        var max = parseInt($(e).attr('max'))
        var value = parseFloat($(e).val())
        if (min > value || max < value) {
          e.setCustomValidity("" + $(e).attr('label') + " must be between " + min + " and " + max + "")
          e.reportValidity()
          validation_fire = 1
        }
      }
    }
    $('.mta-energy_storage-parameter input').each(function (index) {
      validation(this)
    })
    $('.mta-size-parameter input').each(function (index) {
      validation(this)
    })
    if (validation_fire == 1) {
      return false
    }
    else {
      return true
    }
  }
  function check_station_input(form_data) {
    const sizeParameters = {};
    form_data.forEach(item => {
      if (item.name.endsWith("_size")) {
        sizeParameters[item.name] = parseFloat(item.value) || 0;
      }
    });
    var total_mw = sizeParameters.ev_size + sizeParameters.solar_size / 1000 + sizeParameters.battery_size + sizeParameters.fly_size + sizeParameters.supercapacitor_size
    if (total_mw == 0) {
      return true
    }
    else {
      return false
    }
  }
  function check_station_limit(form_data) {
    const sizeParameters = {};
    form_data.forEach(item => {
      if (item.name.endsWith("_size")) {
        sizeParameters[item.name] = parseFloat(item.value) || 0;
      }
    });
    // var total_mw = sizeParameters.ev_size + sizeParameters.solar_size/1000 + sizeParameters.battery_size + sizeParameters.fly_size + sizeParameters.supercapacitor_size
    var total_mw = sizeParameters.battery_size + sizeParameters.fly_size + sizeParameters.supercapacitor_size
    if (total_mw > 3) {
      return true
    }
    else {
      return false
    }
  }
  // $('input[name="graph_type"]:checked')

  $('input[name="graph_type"]').click(function () {
    $('#myModal img').hide()
    $('img[value="' + $(this).attr('id') + '"]').show()
  })
  $('a[name="transient_form_submit"]').click(function () {
    if (transient_check_validation()) {
      var form = $('form#transient_details_form')
      var form_data = form.serializeArray()
      for (const [key, value] of Object.entries(form_data)) {
        if (value['value'] != '') {
          transient_data[value['name']] = value['value']
        }
        else {
          transient_data[value['name']] = value['value']
        }
      }
      var passengerStationDict = { 'HudsonYards': '34 St-Hudson Yards', 'TimesSquare': 'Times Square-42 St', 'Ave5': '5 Ave', 'GrandCentral': 'Grand Central-42 St', 'Vernon': 'Vernon Blvd-Jackson Av', 'HuntersPoint': 'Hunters Point Av', 'CourtSquare': 'Court Square', 'QueensboroPlaza': 'Queensboro Plaza', 'St33': '33 St-Rawson St', 'St40': '40 St-Lowery St', 'St46': '46 St-Bliss St', 'St52': '52 St', 'St61': '61 St-Woodside', 'St69': '69 St', 'St74': '74 St-Broadway', 'St82': '82 St-Jackson Hts', 'St90': '90 St-Elmhurst Av', 'JunctionBlvd': 'Junction Blvd', 'St103': '103 St-Corona Plaza', 'St111': '111 St', 'WilletsPoint': 'Mets-Willets Pt', 'MainSt': 'Flushing-Main St' }
      $('#transient-table tr[name="' + transient_data.origin_station + '"]').remove()
      var temp = `<tr class="t-station" style="background-color:rgb(249, 249, 249);" name="${transient_data.origin_station}">
          <td style="font-weight : bold;">${passengerStationDict[transient_data.origin_station]}</td>
          <td>${passengerStationDict[transient_data.destination_station]}</td>
          <td>${transient_data.train_type}</td>
          <td>
            <img value="${transient_data.origin_station}" name="edit" style="width:20px;" src="${$('#mta_7_line_details').attr('edit-src')}" alt="">
          </td>
          <td>
            <img value="${transient_data.origin_station}" name="delete" style="width:20px;" src="${$('#mta_7_line_details').attr('delete-src')}" alt="">
          </td>
        </tr>`
      var lastRow = $('#transient-table tr:last');
      if (lastRow[0].id != 'transient-no-data-row') {
        $('#transient-table tr:last').remove()
      }
      $('#transient-table tr:last').after(temp);
      $('#transient-no-data-row').addClass('d-none');
      $('#add-transient-line').addClass('d-none');

      transient_modal.style.display = 'none'
      $('.t-station td img').off('click');
      $('.t-station td img').click(function () {
        var value = $(this).attr('value')
        if ($(this).attr('name') == 'delete') {
          console.log(value, "--=-==-===-=-=-=")
          $('#transient-train-graph').addClass('d-none')
          $('.t-station[name="' + value + '"]').remove()
          var rowCount = $('#transient-table tr').length;

          if (rowCount == 2) {
            $('#transient-no-data-row').removeClass('d-none');
            $('#add-transient-line').removeClass('d-none');
          }
          transient_data = {}
        }
        if ($(this).attr('name') == 'edit') {
          row_id = $(this).attr('value')
          transient_modal.style.display = 'block';
        }
      })

    }
  })
  $('a[name="mta_form_submit"]').click(function () {
    if (mta_check_validation()) {
      var form = $('form#mta_7_line_details_form')
      var form_data = form.serializeArray()
      if (check_station_input(form_data)) {
        customAlert('Warning!', 'Please modify input!', 'warning')
        // alert("Please, Modify input!"); // Warning
      }
      else if (check_station_limit(form_data)) {
        customAlert('Warning!', 'Station limit exceeded, please keep total of Energy Storage no greater than 3 MW!', 'warning')
        // alert("Station limit exceeded, please keep total of Energy Storage no greater than 3 MW!"); // Warning
      }
      else {
        var power_station_data = {}
        var passenger_station_data = {}
        var mainOptionValue = ''
        for (let i = 0; i < form_data.length; i++) {
          if (form_data[i].name === "main-option") {
            mainOptionValue = form_data[i].value;
            break;
          }
        }
        for (const [key, value] of Object.entries(form_data)) {
          if (mainOptionValue == 'power') {
            if (value['value'] != '') {
              power_station_data[value['name']] = value['value']
            }
            else {
              power_station_data[value['name']] = value['value']
            }
          }
          else {
            if (value['value'] != '') {
              passenger_station_data[value['name']] = value['value']
            }
            else {
              passenger_station_data[value['name']] = value['value']
            }
          }
        }
        console.log(power_station_data, "------ FORM DATA -------", passenger_station_data)
        if (mainOptionValue === 'power') {
          mta_chat_data['power'][power_station_data.power_stations] = power_station_data;
        }
        else {
          mta_chat_data['passenger'][passenger_station_data.passenger_stations] = passenger_station_data;
        }
        console.log(mta_chat_data, "*******************************")
        var station_default = 0
        var ev_size = '-'
        var solar_size = '-'
        var battery_size = '-'
        var fly_size = '-'
        var supercapacitor_size = '-'

        if (power_station_data.hasOwnProperty('default')) {
          station_default = 1
        }
        if (power_station_data.ev_size != "") {
          ev_size = power_station_data.ev_size
        }
        if (power_station_data.solar_size != "") {
          solar_size = power_station_data.solar_size
        }
        if (power_station_data.battery_size != "") {
          battery_size = power_station_data.battery_size
        }
        if (power_station_data.fly_size != "") {
          fly_size = power_station_data.fly_size
        }
        if (power_station_data.supercapacitor_size != "") {
          supercapacitor_size = power_station_data.supercapacitor_size
        }

        var passenger_station_default = 0
        var passenger_ev_size = '-'
        var passenger_solar_size = '-'
        var passenger_battery_size = '-'
        var passenger_fly_size = '-'
        var passenger_supercapacitor_size = '-'
        if (passenger_station_data.hasOwnProperty('default')) {
          passenger_station_default = 1
        }
        if (passenger_station_data.ev_size != "") {
          passenger_ev_size = passenger_station_data.ev_size
        }
        if (passenger_station_data.solar_size != "") {
          passenger_solar_size = passenger_station_data.solar_size
        }
        if (passenger_station_data.battery_size != "") {
          passenger_battery_size = passenger_station_data.battery_size
        }
        if (passenger_station_data.fly_size != "") {
          passenger_fly_size = passenger_station_data.fly_size
        }
        if (passenger_station_data.supercapacitor_size != "") {
          passenger_supercapacitor_size = passenger_station_data.supercapacitor_size
        }
        var temp = ''

        console.log(passenger_solar_size, "======== passenger_solar_size =========")
        if (mainOptionValue == 'power') {
          // Removed before EV size
          // <td>${station_default}</td>
          var pStation = ['Hudson34', 'Ave10', 'Ave7', 'Park', 'Tudor', 'Ave50', 'QueensBlvd'];
          if (pStation.includes(power_station_data.power_stations)) {
            var power_solar_size = 'N/A'
          }
          else {
            var power_solar_size = solar_size
          }

          var stationDict = { 'Hudson34': '34 St-Hudson Yards Substation', 'Ave10': '10th Ave Substation', 'Ave7': '7 Ave-43 St Substation', 'Park': 'Park Ave-41 St Substation', 'Tudor': 'Tudor Substation', 'Ave50': '50 Ave-11 St Substation', 'Jackson': 'Jackson Ave-West St Substation', 'QueensBlvd': 'Queens Blvd-39 Place Substation', 'St58': '58 St Substation', 'St78': 'Roosevelt-78 St Substation', 'Spruce': 'Roosevelt-Spruce St Substation', 'Corona': 'Corona Yard Substation', 'Lawrence': 'Lawrence Substation' }
          $('#station-table tr[name="' + power_station_data.power_stations + '"]').remove()
          // if(document.getElementsByClassName('appearAfter')){}
          // const hidedButton = document.getElementsByClassName('appearAfter')[0];
          // hidedButton.classList.remove('appearAfter');
          var temp = `<tr class="p-station" style="background-color:rgb(249, 249, 249);" name="${power_station_data.power_stations}">
                <td style="font-weight : bold;">${stationDict[power_station_data.power_stations]}</td>
                <td>${ev_size}</td>
                <td>${power_solar_size}</td>
                <td>${battery_size}</td>
                <td>${fly_size}</td>
                <td>${supercapacitor_size}</td>
                <td>
                  <img value="${power_station_data.power_stations}" option="power" name="edit" style="width:20px;" src="${$('#mta_7_line_details').attr('edit-src')}" alt="">
                </td>
                <td>
                  <img value="${power_station_data.power_stations}" option="power" name="delete" style="width:20px;" src="${$('#mta_7_line_details').attr('delete-src')}" alt="">
                </td>
              </tr>`
        }
        else {
          var psgStation = ['HudsonYards', 'TimesSquare', 'Ave5', 'GrandCentral', 'Vernon', 'HuntersPoint', 'MainSt']
          if (psgStation.includes(passenger_station_data.passenger_stations)) {
            var psg_solar_size = 'N/A'
          }
          else {
            var psg_solar_size = passenger_solar_size
          }
          var passengerStationDict = { 'HudsonYards': '34 St-Hudson Yards', 'TimesSquare': 'Times Square-42 St', 'Ave5': '5 Ave', 'GrandCentral': 'Grand Central-42 St', 'Vernon': 'Vernon Blvd-Jackson Av', 'HuntersPoint': 'Hunters Point Av', 'CourtSquare': 'Court Square', 'QueensboroPlaza': 'Queensboro Plaza', 'St33': '33 St-Rawson St', 'St40': '40 St-Lowery St', 'St46': '46 St-Bliss St', 'St52': '52 St', 'St61': '61 St-Woodside', 'St69': '69 St', 'St74': '74 St-Broadway', 'St82': '82 St-Jackson Hts', 'St90': '90 St-Elmhurst Av', 'JunctionBlvd': 'Junction Blvd', 'St103': '103 St-Corona Plaza', 'St111': '111 St', 'WilletsPoint': 'Mets-Willets Pt', 'MainSt': 'Flushing-Main St' }
          $('#station-table tr[name="' + passenger_station_data.passenger_stations + '"]').remove()
          var temp = `<tr class="p-station" style="background-color:rgb(229, 229, 229);" name="${passenger_station_data.passenger_stations}">
                  <th scope="row">${passengerStationDict[passenger_station_data.passenger_stations]}</th>
                  <td>${passenger_ev_size}</td>
                  <td>${psg_solar_size}</td>
                  <td>${passenger_battery_size}</td>
                  <td>${passenger_fly_size}</td>
                  <td>${passenger_supercapacitor_size}</td>
                  <td>
                    <img value="${passenger_station_data.passenger_stations}" option="passenger" name="edit" style="width:20px;" src="${$('#mta_7_line_details').attr('edit-src')}" alt="">
                  </td>
                  <td>
                    <img value="${passenger_station_data.passenger_stations}" option="passenger" name="delete" style="width:20px;" src="${$('#mta_7_line_details').attr('delete-src')}" alt="">
                  </td>
                </tr>`
        }
        $('#station-table tr:last').after(temp);
        // }
        $('#no-data-row').addClass('d-none');

        mta_modal.style.display = 'none'
        $('.p-station td img').off('click');
        $('.p-station td img').click(function () {
          var value = $(this).attr('value')
          if ($(this).attr('name') == 'delete') {
            $('.p-station[name="' + value + '"]').remove()
            var rowCount = $('#station-table tr').length;
            if (rowCount == 2) {
              $('#no-data-row').removeClass('d-none');
            }
            if ($(this).attr('option') == 'power') {
              delete mta_chat_data.power[value];
            }
            else {
              delete mta_chat_data.passenger[value];
            }
          }
          if ($(this).attr('name') == 'edit') {
            if ($(this).attr('option') == 'power') {
              mta_form_load_data(value)
            }
            else {
              mta_passenger_form_load_data(value)
            }
          }
        })
      }
    }
  })
  function mta_form_load_data(power_station) {
    console.log(powerStation, "=-=-==--=====-")
    $('#mta_power_stations').empty()
    var powerstationDict = { 'Hudson34': '34 St-Hudson Yards Substation', 'Ave10': '10th Ave Substation', 'Ave7': '7 Ave-43 St Substation', 'Park': 'Park Ave-41 St Substation', 'Tudor': 'Tudor Substation', 'Ave50': '50 Ave-11 St Substation', 'Jackson': 'Jackson Ave-West St Substation', 'QueensBlvd': 'Queens Blvd-39 Place Substation', 'St58': '58 St Substation', 'St78': 'Roosevelt-78 St Substation', 'Spruce': 'Roosevelt-Spruce St Substation', 'Corona': 'Corona Yard Substation', 'Lawrence': 'Lawrence Substation' }
    $('#mta_power_stations').append('<option name="" value="">Select Power Station</option>');
    for (const [key, value] of Object.entries(powerstationDict)) {
      $('#mta_power_stations').append(`<option name="${key}" value="${key}">${value}</option>`);
    }
    for (const [key, value] of Object.entries(mta_chat_data.power)) {
      if (power_station != key) {
        $('#mta_power_stations option[name="' + key + '"]').remove()
      }
    }
    $('#power_station_option').prop('checked', true)
    $('#mta_power_stations option[name="' + power_station + '"]').prop('selected', true);
    mta_modal.style.display = 'block'
    for (const [key, value] of Object.entries(mta_chat_data.power[power_station])) {
      var temp = $('form#mta_7_line_details_form [name="' + key + '"]')
      if (temp[0].tagName == 'INPUT') {
        if (temp.attr('type') == 'checkbox') {
          temp.prop('checked', value)
        }
        if (temp.attr('type') == 'number') {
          temp.val(value)
        }
      }
    }
  }

  function mta_passenger_form_load_data(passenger_station) {
    $('#mta_passenger_stations').empty()
    var passengerstationDict = { 'HudsonYards': '34 St-Hudson Yards', 'TimesSquare': 'Times Square-42 St', 'Ave5': '5 Ave', 'GrandCentral': 'Grand Central-42 St', 'Vernon': 'Vernon Blvd-Jackson Av', 'HuntersPoint': 'Hunters Point Av', 'CourtSquare': 'Court Square', 'QueensboroPlaza': 'Queensboro Plaza', 'St33': '33 St-Rawson St', 'St40': '40 St-Lowery St', 'St46': '46 St-Bliss St', 'St52': '52 St', 'St61': '61 St-Woodside', 'St69': '69 St', 'St74': '74 St-Broadway', 'St82': '82 St-Jackson Hts', 'St90': '90 St-Elmhurst Av', 'JunctionBlvd': 'Junction Blvd', 'St103': '103 St-Corona Plaza', 'St111': '111 St', 'WilletsPoint': 'Mets-Willets Pt', 'MainSt': 'Flushing-Main St' }
    $('#mta_passenger_stations').append('<option name="" value="">Select Passenger Station</option>');
    for (const [key, value] of Object.entries(passengerstationDict)) {
      $('#mta_passenger_stations').append(`<option name="${key}" value="${key}">${value}</option>`);
    }
    for (const [key, value] of Object.entries(mta_chat_data.passenger)) {
      console.log(key, "++++++++++", value, "++++++++++", passenger_station)
      if (passenger_station != key) {
        $('#mta_passenger_stations option[name="' + key + '"]').remove()
      }
    }
    $('#mta_passenger_stations option[name="' + passenger_station + '"]').prop('selected', true);
    $('#passenger_station_option').prop('checked', true)
    mta_modal.style.display = 'block'
    for (const [key, value] of Object.entries(mta_chat_data.passenger[passenger_station])) {
      var temp = $('form#mta_7_line_details_form [name="' + key + '"]')
      if (temp[0].tagName == 'INPUT') {
        if (temp.attr('type') == 'checkbox') {
          temp.prop('checked', value)
        }
        if (temp.attr('type') == 'number') {
          temp.val(value)
        }
      }
    }
  }

  function clear_mta_line_option(e) {
    $('form#mta_7_line_details_form :input').val('')
    $('form#mta_7_line_details_form :input').prop('checked', false)
  }
  function hide_show_solar(e) {
    if ($(e).attr('name') == 'power_stations') {
      var pStation = ['Hudson34', 'Ave10', 'Ave7', 'Park', 'Tudor', 'Ave50', 'QueensBlvd']
      if (pStation.includes($(e).val()) || $(e).val() == '') {
        $('.solar-check-box').addClass('d-none')
      }
      else {
        $('.solar-check-box').removeClass('d-none')
      }
    }
    else {
      var psgStation = ['HudsonYards', 'TimesSquare', 'Ave5', 'GrandCentral', 'Vernon', 'HuntersPoint', 'MainSt']
      if (psgStation.includes($(e).val()) || $(e).val() == '') {
        $('.solar-check-box').addClass('d-none')
      }
      else {
        $('.solar-check-box').removeClass('d-none')
      }
    }
  }
  function check_mta_line_option(e) {
    var temp = 0
    if (e) {
      if ($(e).attr('name') == 'default') {
        var defaut_props = $(e).prop('checked')
        if (defaut_props) {
          $('input.mta-facility-option#mta_electric_vehicle').prop('checked', false)
          $('input.mta-facility-option#mta_energy_storage').prop('checked', false)
          $('input.mta-facility-option#mta_solar').prop('checked', false)
        }
      } else {
        $('input.mta-facility-option[name="default"]').prop('checked', false)
      }
    }
    if ($('#mta_electric_vehicle').prop('checked')) {
      $('.electric_vehicle_expand').show()
      temp += 1
    } else {
      $('#ev_size').val(0)
      $('.electric_vehicle_expand').hide()
    }
    if ($('#mta_energy_storage').prop('checked')) {
      $('.energy_storage_expand').show()
      temp += 1
    } else {
      $('.energy_storage_expand').hide()
    }
    if ($('#mta_solar').prop('checked')) {
      $('.solar_expand').show()
      temp += 1
    } else {
      $('#solar_size').val(0)
      $('.solar_expand').hide()
    }
    if ($('#mta_battery').prop('checked')) {
      $('.battery_expand').show()
      temp += 1
    } else {
      $('#battery_size').val(0)
      $('.battery_expand').hide()
    }
    if ($('#mta_fly_wheel').prop('checked')) {
      $('.fly_wheel_expand').show()
      temp += 1
    } else {
      $('#fly_size').val(0)
      $('.fly_wheel_expand').hide()
    }
    if ($('#mta_supercapacitor').prop('checked')) {
      $('.supercapacitor_expand').show()
      temp += 1
    } else {
      $('#supercapacitor_size').val(0)
      $('.supercapacitor_expand').hide()
    }
    if (temp == 0) {
      $('input.mta-facility-option[name="default"]').prop('checked', true)
    } else {
      $('input.mta-facility-option[name="default"]').prop('checked', false)
    }
  }

  // $('#add-line, .passenger-station').click(function () {
  $('#add-line').click(function () {
    $('#mta_7_line_details_form')[0].reset();
    powerStationOption.removeClass('d-none');
    passengerStationOption.addClass('d-none');
    mta_modal.style.display = 'block'
    $('#mta_7_line_details_form input').prop('checked', false)
    $('#power_station_option').prop('checked', true)
    $('#mta_7_line_details_form input').change(function () {
      check_mta_line_option(this)
    })
    $('#mta_power_stations, #mta_passenger_stations').change(function () {
      hide_show_solar(this)
    })
    check_mta_line_option(false)
    $('#mta_power_stations').empty()
    $('#mta_passenger_stations').empty()
    var powerstationDict = { 'Hudson34': '34 St-Hudson Yards Substation', 'Ave10': '10th Ave Substation', 'Ave7': '7 Ave-43 St Substation', 'Park': 'Park Ave-41 St Substation', 'Tudor': 'Tudor Substation', 'Ave50': '50 Ave-11 St Substation', 'Jackson': 'Jackson Ave-West St Substation', 'QueensBlvd': 'Queens Blvd-39 Place Substation', 'St58': '58 St Substation', 'St78': 'Roosevelt-78 St Substation', 'Spruce': 'Roosevelt-Spruce St Substation', 'Corona': 'Corona Yard Substation', 'Lawrence': 'Lawrence Substation' }
    $('#mta_power_stations').append('<option name="" value="">Select Power Station</option>');
    for (const [key, value] of Object.entries(powerstationDict)) {
      $('#mta_power_stations').append(`<option name="${key}" value="${key}">${value}</option>`);
    }
    var passengerstationDict = { 'HudsonYards': '34 St-Hudson Yards', 'TimesSquare': 'Times Square-42 St', 'Ave5': '5 Ave', 'GrandCentral': 'Grand Central-42 St', 'Vernon': 'Vernon Blvd-Jackson Av', 'HuntersPoint': 'Hunters Point Av', 'CourtSquare': 'Court Square', 'QueensboroPlaza': 'Queensboro Plaza', 'St33': '33 St-Rawson St', 'St40': '40 St-Lowery St', 'St46': '46 St-Bliss St', 'St52': '52 St', 'St61': '61 St-Woodside', 'St69': '69 St', 'St74': '74 St-Broadway', 'St82': '82 St-Jackson Hts', 'St90': '90 St-Elmhurst Av', 'JunctionBlvd': 'Junction Blvd', 'St103': '103 St-Corona Plaza', 'St111': '111 St', 'WilletsPoint': 'Mets-Willets Pt', 'MainSt': 'Flushing-Main St' }
    $('#mta_passenger_stations').append('<option name="" value="">Select Passenger Station</option>');
    for (const [key, value] of Object.entries(passengerstationDict)) {
      $('#mta_passenger_stations').append(`<option name="${key}" value="${key}">${value}</option>`);
    }
    for (const [key, value] of Object.entries(mta_chat_data.power)) {
      $('#mta_power_stations option[name="' + key + '"]').remove()
    }
    for (const [key, value] of Object.entries(mta_chat_data.passenger)) {
      $('#mta_passenger_stations option[name="' + key + '"]').remove()
    }
  })
  $('#transient-train-graph').click(function () {
    $('#TrainAcceleration').attr('src', '/static/TrainGraphs_Transient/TrainAcceleration.png')
    $('#TrainCurrent').attr('imgFile', '/static/TrainGraphs_Transient/TrainCurrent.png')
    $('#TrainDistance').attr('imgFile', '/static/TrainGraphs_Transient/TrainDistance.png')
    $('#TrainLocation').attr('imgFile', '/static/TrainGraphs_Transient/TrainLocation.png')
    $('#TrainPower').attr('imgFile', '/static/TrainGraphs_Transient/TrainPower.png')
    $('#TrainSpeed').attr('imgFile', '/static/TrainGraphs_Transient/TrainSpeed.png')
    const element = $('#TrainAcceleration');
    console.log("THIS IS ELEMENT" , element)
    handleRenderGraphLive(1)
    // graphModal.style.display = 'block'
  })
  $('#add-transient-line').click(function () {
    $('#transient_details_form')[0].reset();
    powerStationOption.removeClass('d-none');
    passengerStationOption.addClass('d-none');
    transient_modal.style.display = 'block'
    $('#transient_details_form input').prop('checked', false)
    $('#power_station_option').prop('checked', true)
    $('#transient_details_form input').change(function () {
      check_mta_line_option(this)
    })
    $('#mta_power_stations, #mta_passenger_stations').change(function () {
      hide_show_solar(this)
    })
    check_mta_line_option(false)
    $('#mta_power_stations').empty()
    $('#mta_passenger_stations').empty()
    var powerstationDict = { 'Hudson34': '34 St-Hudson Yards Substation', 'Ave10': '10th Ave Substation', 'Ave7': '7 Ave-43 St Substation', 'Park': 'Park Ave-41 St Substation', 'Tudor': 'Tudor Substation', 'Ave50': '50 Ave-11 St Substation', 'Jackson': 'Jackson Ave-West St Substation', 'QueensBlvd': 'Queens Blvd-39 Place Substation', 'St58': '58 St Substation', 'St78': 'Roosevelt-78 St Substation', 'Spruce': 'Roosevelt-Spruce St Substation', 'Corona': 'Corona Yard Substation', 'Lawrence': 'Lawrence Substation' }
    $('#mta_power_stations').append('<option name="" value="">Select Power Station</option>');
    for (const [key, value] of Object.entries(powerstationDict)) {
      $('#mta_power_stations').append(`<option name="${key}" value="${key}">${value}</option>`);
    }
    var passengerstationDict = { 'HudsonYards': '34 St-Hudson Yards', 'TimesSquare': 'Times Square-42 St', 'Ave5': '5 Ave', 'GrandCentral': 'Grand Central-42 St', 'Vernon': 'Vernon Blvd-Jackson Av', 'HuntersPoint': 'Hunters Point Av', 'CourtSquare': 'Court Square', 'QueensboroPlaza': 'Queensboro Plaza', 'St33': '33 St-Rawson St', 'St40': '40 St-Lowery St', 'St46': '46 St-Bliss St', 'St52': '52 St', 'St61': '61 St-Woodside', 'St69': '69 St', 'St74': '74 St-Broadway', 'St82': '82 St-Jackson Hts', 'St90': '90 St-Elmhurst Av', 'JunctionBlvd': 'Junction Blvd', 'St103': '103 St-Corona Plaza', 'St111': '111 St', 'WilletsPoint': 'Mets-Willets Pt', 'MainSt': 'Flushing-Main St' }
    $('#mta_passenger_stations').append('<option name="" value="">Select Passenger Station</option>');
    for (const [key, value] of Object.entries(passengerstationDict)) {
      $('#mta_passenger_stations').append(`<option name="${key}" value="${key}">${value}</option>`);
    }
    for (const [key, value] of Object.entries(mta_chat_data.power)) {
      $('#mta_power_stations option[name="' + key + '"]').remove()
    }
    for (const [key, value] of Object.entries(mta_chat_data.passenger)) {
      $('#mta_passenger_stations option[name="' + key + '"]').remove()
    }
    $('.org_station').css('pointer-events', 'none').css('color', '#00000040')
    $('.dest_station').css('pointer-events', 'none').css('color', '#00000040')
  })

  $('#transient_train_type').change(function () {
    $('#transient_destination_station :selected').prop('selected', false);
    $('#transient_origin_station :selected').prop('selected', false);
    if ($('#transient_train_type :selected').attr('name') == '') {
      $('.org_station').css('pointer-events', 'none').css('color', '#00000040')
      $('.dest_station').css('pointer-events', 'none').css('color', '#00000040')

    } else {
      $('.org_station').css('pointer-events', 'auto').css('color', '#000')
      $('.dest_station').css('pointer-events', 'auto').css('color', '#000')
    }
    if ($('#transient_train_type :selected').attr('name') == 'express') {
      $('#transient_origin_station option').each(function (index) {
        var check_var = $(this).attr('name')
        if (!localStations.includes(check_var)) {
          $(this).removeClass('d-none')
        } else {
          $(this).addClass('d-none')
        }
      })
      $('#transient_destination_station option').each(function (index) {
        var check_var = $(this).attr('name')
        if (!localStations.includes(check_var)) {
          $(this).removeClass('d-none')
        } else {
          $(this).addClass('d-none')
        }
      })
    }
    if ($('#transient_train_type :selected').attr('name') == 'local') {
      $('#transient_destination_station option').removeClass('d-none')
      $('#transient_origin_station option').removeClass('d-none')
    }
  })

  $('#energy_storage').change(function () {
    if ($(this).prop('checked')) {
      $('.battery-storage-expand').removeClass('d-none')
      $('#battery').prop('checked', false)
      $('#fly_wheel').prop('checked', false)
      $('#supercapacitor').prop('checked', false)
    } else {
      $('.battery-storage-expand').addClass('d-none')
      $('.battery-size-expand').addClass('d-none')
      $('.fly-size-expand').addClass('d-none')
      $('.supercapacitor-size-expand').addClass('d-none')
    }
  })
  $('#electric_vehicle').change(function () {
    if ($(this).prop('checked')) {
      $('.ev-size-expand').removeClass('d-none')
    } else {
      $('.ev-size-expand').addClass('d-none')
    }
  })
  $('#solar').change(function () {
    if ($(this).prop('checked')) {
      $('.solar-size-expand').removeClass('d-none')
    } else {
      $('.solar-size-expand').addClass('d-none')
    }
  })
  $('#battery').change(function () {
    if ($(this).prop('checked')) {
      $('.battery-size-expand').removeClass('d-none')
    } else {
      $('.battery-size-expand').addClass('d-none')
    }
  })
  $('#fly_wheel').change(function () {
    if ($(this).prop('checked')) {
      $('.fly-size-expand').removeClass('d-none')
    } else {
      $('.fly-size-expand').addClass('d-none')
    }
  })
  $('input#default').change(function () {
    var value = $(this).prop('checked')
    if (value) {
      $('#myModal').find('input').each(function (index) {
        if ($(this).attr('id') != 'default') {
          $(this).prop('checked', false)
        }
      })
    }
    hide_clear_mta7_lines_data_input()
  })
  $('#myModal input').change(function () {
    if ($(this).attr('id') != 'default') {
      $('input#default').prop('checked', false)

    }
  })
  $('#supercapacitor').change(function () {
    if ($(this).prop('checked')) {
      $('.supercapacitor-size-expand').removeClass('d-none')
    } else {
      $('.supercapacitor-size-expand').addClass('d-none')
    }
  })
  $('.mta7_line').click(function () {
    var graphStationDict = ['Hudson34', 'Ave10', 'Ave7', 'Park', 'Tudor', 'Ave50', 'Jackson', 'QueensBlvd', 'St58', 'St78', 'Spruce', 'Corona', 'Lawrence']

    for (let i = 0; i < graphStationDict.length; i++) {
      var areaID = document.getElementById(graphStationDict[i])
      var graphTemp = `<div class="myGSlides" image="${graphStationDict[i]}" index="${i + 1}">
              <img name="stedy" class="modal-content stedy_img" value="stedy-${graphStationDict[i]}" id="stedy_img" src="${$(areaID).attr('image_file')}" style=""/>
              <img name="transient" style="display:none;" value="transient-${graphStationDict[i]}" class="modal-content transient_img" id="transient_img" src="${$(areaID).attr('transient_image_file')}" style=""/>
              <div class="graph-type-options">
                <input type="radio" class="stedy_option" name="graph_type_${graphStationDict[i]}" id="stedy-${graphStationDict[i]}" value="stedy" checked>
                <label class="modal-labels" for="stedy-${graphStationDict[i]}">24 Hr</label>
                <input type="radio" class="transient_option" name="graph_type_${graphStationDict[i]}" id="transient-${graphStationDict[i]}" value="transient">
                <label class="modal-labels" for="transient-${graphStationDict[i]}">Live</label>
              </div>
              </div>`
      $('#map-graphs').append(graphTemp)
      $('.stedy_option').off('change');
      $('.stedy_option').change(function () {
        stay_transient_option_update(this)
      })
      $('.transient_option').off('change');
      $('.transient_option').change(function () {
        stay_transient_option_update(this)
      })
      function stay_transient_option_update(e) {
        var option_value = $(e).prop('value')
        var stedy_option = false
        var transient_option = false
        if (option_value == 'stedy') {
          if ($(e).prop('checked')) {
            stedy_option = true
            transient_option = false
          } else {
            stedy_option = false
            transient_option = true
          }
        }
        if (option_value == 'transient') {
          if ($(e).prop('checked')) {
            stedy_option = false
            transient_option = true
          } else {
            stedy_option = true
            transient_option = false
          }
        }
        $('.stedy_option').prop('checked', stedy_option)
        $('.transient_option').prop('checked', transient_option)
        if (stedy_option) {
          $('img[name="stedy"]').show()
          $('img[name="transient"]').hide()
        } else {
          $('img[name="stedy"]').hide()
          $('img[name="transient"]').show()
        }
      }
    }
    var currIndex = parseInt($(this).attr('index'))
    let currentSlideGraph = document.getElementsByClassName("myGSlides")[currIndex - 1];
    currentSlideGraph.style.display = "block";
    $(currentSlideGraph).addClass('active-graph')
    // showGraphSlides(parseInt($(this).attr('index')));
    modal.style.display = "block";
    // modalImg.src = $(this).attr('image_file');
    // transient_stedy_img.src = $(this).attr('transient_image_file');
    captionText.innerHTML = $(this).attr('alt');
    modalTitle.innerHTML = $(this).attr('alt');
    // $($('input[name="graph_type"]')[0]).prop('checked', true);
    // $('#myModal img').hide()
    // $('img[name="stedy"]').show()
    for (let i = 0; i < graphStationDict.length; i++) {
      $('input[name="graph_type_' + graphStationDict[i] + '"]').click(function () {
        $('#myModal img').hide()
        $('img[value="' + $(this).attr('id') + '"]').show()
      })
    }
  });
  $(document).keydown(function (event) {
    if (event.keyCode == 27) {
      modal.style.display = 'none'
      mta_modal.style.display = 'none'
      $(".myGSlides").remove();
    }
    if (event.keyCode == 37) {
      plusGSlides(-1)
    }
    if (event.keyCode == 39) {
      plusGSlides(1)
    }
  })
  function hide_clear_mta7_lines_data_input() {
    $('.ev-size-expand').addClass('d-none')
    $('.solar-size-expand').addClass('d-none')
    $('.battery-storage-expand').addClass('d-none')
    $('.battery-size-expand').addClass('d-none')
    $('.fly-size-expand').addClass('d-none')
    $('.supercapacitor-size-expand').addClass('d-none')
  }
  function clear_mta7_lines_data() {
    hide_clear_mta7_lines_data_input()
    $('select[name="power_stations"]').empty()
    $('.facility-option').prop('checked', false)
  }
  // Get the <span> element that closes the modal
  // When the user clicks on <span> (x), close the modal
  var modalGraph = document.getElementById('myModal')
  $('#close-graph-modal').click(function () {
    modalGraph.style.display = 'none';
    $(".myGSlides").remove();
  });
</script>
{% endblock %}